---
ms.openlocfilehash: 50690c00791b1f6ca1d585c1fb653f0ec4794578
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050110"
---
# <a name="prebuild-install"></a>prebuild-install

> **أداة سطر الأوامر لتثبيت الثنائيات المعدة مسبقًا بسهولة لإصدارات متعددة من Node.js & Electron على نظام أساسي معين.**
> بشكل افتراضي، يقوم بتنزيل الثنائيات المعدة مسبقًا من إصدار GitHub.

[![npm](https://img.shields.io/npm/v/prebuild-install.svg)](https://www.npmjs.com/package/prebuild-install)
![Node version](https://img.shields.io/node/v/prebuild-install.svg)
[![Test](https://github.com/prebuild/prebuild-install/actions/workflows/test.yml/badge.svg)](https://github.com/prebuild/prebuild-install/actions/workflows/test.yml)
[![david](https://david-dm.org/prebuild/prebuild-install.svg)](https://david-dm.org/prebuild/prebuild-install)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg)](http://standardjs.com/)

## <a name="note"></a>ملاحظة

**بدلًا من اقتران [`prebuild`](https://github.com/prebuild/prebuild) مع [`prebuild-install`](https://github.com/prebuild/prebuild-install)، نوصي باقتران [`prebuildify`](https://github.com/prebuild/prebuildify)مع [`node-gyp-build`](https://github.com/prebuild/node-gyp-build).**

مع `prebuildify`، يتم شحن جميع الثنائيات المعدة مسبقًا داخل الحزمة التي يتم نشرها على npm، مما يعني أنه ليست هناك حاجة لخطوة تنزيل منفصلة كما تجد في `prebuild`. المفارقة في هذا النهج هي أنه من الأسرع تنزيل جميع الثنائيات المعدة مسبقًا لكل نظام أساسي عندما يتم تجميعها أكثر من تنزيل ثنائي واحد تم إنشاؤه مسبقًا كبرنامج نصي للتثبيت.

الايجابيات:

1. لا توجد خطوة تنزيل إضافية، مما يجعلها أكثر موثوقية وأسرع في التثبيت.
2. يدعم تغيير إصدارات وقت التشغيل محليًا واستخدام نفس التثبيت بين Node.js وElectron. إعادة التثبيت أو إعادة البناء ليست ضرورية، حيث أن جميع الثنائيات المعدة مسبقًا موجودة في npm tarball ويتم اختيار الثنائيات الصحيحة ببساطة في وقت التشغيل.
3. تعتمد تبعية وقت تشغيل `node-gyp-build` على التبعية وستظل خارج المبدأ، لأن إدخال التبعيات من شأنه أن يلغي وقت التثبيت الأقصر.
4. تعمل الثنائيات المعدة مسبقًا حتى إذا تم تعطيل البرامج النصية لتثبيت npm.
5. يغطي المجموع الاختباري لحزمة npm الثنائيات المعدة مسبقًا أيضًا.

الجوانب السلبية:

1. حزمة npm المثبتة أكبر على القرص. يؤدي استخدام Node-API إلى تخفيف ذلك لأن ثنائيات [Node-API](https://nodejs.org/api/n-api.html) لا تعرف وقت التشغيل ومتوافقة مع إعادة التوجيه.
2. النشر أكثر تعقيدًا إلى حد ما، لأنه `npm publish` يجب أن يتم بعد تجميع وجلب الثنائيات المعدة مسبقا (عادة في CI).

## <a name="usage"></a>الاستخدام

استخدم [`prebuild`](https://github.com/prebuild/prebuild) لإنشاء ثنائيات تم إنشاؤها مسبقا وتحميلها. ثم قم بتغيير البرنامج النصي لتثبيت package.json إلى:

```json
{
  "scripts": {
    "install": "prebuild-install || node-gyp rebuild"
  }
}
```

### <a name="help"></a>التعليمات

```
prebuild-install [options]

  --download    -d  [url]       (download prebuilds, no url means github)
  --target      -t  version     (version to install for)
  --runtime     -r  runtime     (Node runtime [node, napi or electron] to build or install for, default is node)
  --path        -p  path        (make a prebuild-install here)
  --token       -T  gh-token    (github token for private repos)
  --arch            arch        (target CPU architecture, see Node OS module docs, default is current arch)
  --platform        platform    (target platform, see Node OS module docs, default is current platform)
  --tag-prefix <prefix>         (github tag prefix, default is "v")
  --build-from-source           (skip prebuild download)
  --verbose                     (log verbosely)
  --libc                        (use provided libc rather than system default)
  --debug                       (set Debug or Release configuration)
  --version                     (print prebuild-install version and exit)
```

عندما يتم تشغيل `prebuild-install` عبر برنامج نصي `npm`، يمكن تمرير خيارات `--build-from-source` و`--debug` و`--download` و`--target` و`--runtime` و`--arch` و`--platform` عبر الوسيطات المعطاة للأمر`npm`.

بدلًا من ذلك، يمكنك تعيين متغيرات البيئة `npm_config_build_from_source=true` و`npm_config_platform` و`npm_config_arch` و`npm_config_target` و`npm_config_runtime`.

### <a name="private-repositories"></a>المستودعات الخاصة

يدعم `prebuild-install` تنزيل الإنشاءات المسبقة من مستودعات GitHub الخاصة باستخدام `-T <github-token>`:

```
$ prebuild-install -T <github-token>
```

إذا كنت لا ترغب في استخدام الرمز المميز على cli، فيمكنك وضعه في `~/.prebuild-installrc`:

```
token=<github-token>
```

أو يمكنك تحديدها في متغير البيئة `prebuild-install_token`.

لاحظ أن استخدام رمز مميز GitHub يستخدم واجهة برمجة التطبيقات لحل الإصدار الصحيح مما يعني أنك تخضع ([لحد معدل GitHub](https://developer.github.com/v3/rate_limit/)).

### <a name="create-github-token"></a>إنشاء رمز GitHub

لإنشاء رمز مميز:

- اذهب إلى [هذه الصفحة](https://github.com/settings/tokens)
- انقر الزر `Generate new token`
- امنح الرمز المميز اسمًا وانقر على الزر `Generate token`، انظر أدناه

![prebuild-token](https://cloud.githubusercontent.com/assets/13285808/20844584/d0b85268-b8c0-11e6-8b08-2b19522165a9.png)

يجب أن تكون النطاقات الافتراضية على ما يرام.

### <a name="custom-binaries"></a>الثنائيات المخصصة

يمكن للمستخدم النهائي تجاوز موقع التنزيل الثنائي من خلال متغيرات البيئة في ملف .npmrc الخاص به.
يحتاج المتغير إلى تلبية القناع `% your package name %_binary_host` أو `% your package name %_binary_host_mirror`. على سبيل المثال:

```
leveldown_binary_host=http://overriden-host.com/overriden-path
```

لاحظ أنه سيظل يتم إلحاق المسار الفرعي لإصدار الحزمة واسم الملف.
لذلك إذا كنت تقوم بتثبيت `leveldown@1.2.3` عنوان URL الناتج سيكون:

```
http://overriden-host.com/overriden-path/v1.2.3/leveldown-v1.2.3-node-v57-win32-x64.tar.gz
```

#### <a name="local-prebuilds"></a>الإنشاءات المسبقة المحلية

إذا كنت ترغب في استخدام الإنشاءات المسبقة من نظام الملفات المحلي، فيمكنك استخدام متغير .npmrc `% your package name %_local_prebuilds` لتعيين مسار إلى المجلد الذي يحتوي على عمليات إنشاء مسبقة. على سبيل المثال:

```
leveldown_local_prebuilds=/path/to/prebuilds
```

سيظهر هذا الخيار مباشرة في هذا المجلد للحزم التي تم إنشاؤها باستخدام `prebuild`، على سبيل المثال:

```
/path/to/prebuilds/leveldown-v1.2.3-node-v57-win32-x64.tar.gz
```

يتم حل المسارات غير المطلقة بالنسبة إلى دليل الحزمة الذي يستدعي التثبيت المسبق للإنشاء، على سبيل المثال للتبعيات المتداخلة.

### <a name="cache"></a>ذاكرة التخزين المؤقت

يتم تخزين جميع الثنائيات المعدة مسبقا مؤقتا لتقليل نسبة استخدام الشبكة. لذلك يختار `prebuild-install` أولًا الثنائيات من ذاكرة التخزين المؤقت وإذا لم يتم العثور على ثنائي، تنزيله. اعتمادًا على البيئة، يتم تحديد مجلد ذاكرة التخزين المؤقت بالترتيب التالي:

- `${npm_config_cache}/_prebuilds`
- `${APP_DATA}/npm-cache/_prebuilds`
- `${HOME}/.npm/_prebuilds`

## <a name="license"></a>الترخيص

معهد ماساتشوستس للتكنولوجيا

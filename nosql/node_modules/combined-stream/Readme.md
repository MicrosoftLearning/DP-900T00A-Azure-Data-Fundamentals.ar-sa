---
ms.openlocfilehash: 0e4384a6edea7b3a580ffa5b32236b7f8b251834
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050025"
---
# <a name="combined-stream"></a>combined-stream

دفق ينبعث منه تدفقات أخرى متعددة واحدة تلو الأخرى.

**NB** يعمل `combined-stream` حاليًا مع الإصدار 1 من التدفقات فقط. هناك جهد مستمر لتحويل هذه المكتبة إلى تدفقات الإصدار 2. أي مساعدة هي موضع ترحيب. :) وفي الوقت نفسه، يمكنك استكشاف المكتبات الأخرى التي توفر دعم streams2 مع توافق أكثر أو أقل مع `combined-stream`.

- [combined-stream2](https://www.npmjs.com/package/combined-stream2): بديل سريع متوافق مع streams2 لوحدة الدفق المجمع.

- [multistream](https://www.npmjs.com/package/multistream): دفق ينبعث منه تدفقات أخرى متعددة واحدة تلو الأخرى.

## <a name="installation"></a>التثبيت

``` bash
npm install combined-stream
```

## <a name="usage"></a>الاستخدام

فيما يلي مثال بسيط يوضح كيف يمكنك استخدام البث المشترك لدمج ملفين في ملف واحد:

``` javascript
var CombinedStream = require('combined-stream');
var fs = require('fs');

var combinedStream = CombinedStream.create();
combinedStream.append(fs.createReadStream('file1.txt'));
combinedStream.append(fs.createReadStream('file2.txt'));

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

على الرغم من أن المثال أعلاه يعمل بشكل رائع، إلا أنه سيوقف جميع تدفقات المصدر مؤقتًا حتى تكون هناك حاجة إليها. إذا كنت لا تريد حدوث ذلك، يمكنك تعيين `pauseStreams` إلى `false`:

``` javascript
var CombinedStream = require('combined-stream');
var fs = require('fs');

var combinedStream = CombinedStream.create({pauseStreams: false});
combinedStream.append(fs.createReadStream('file1.txt'));
combinedStream.append(fs.createReadStream('file2.txt'));

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

ومع ذلك، ماذا لو لم يكن لديك جميع تدفقات المصدر حتى الآن، أو كنت لا ترغب في تخصيص الموارد (واصفات الملفات، والذاكرة، وما إلى ذلك) لهم على الفور؟
حسنًا، في هذه الحالة، يمكنك ببساطة توفير معاودة الاتصال التي توفر البث عن طريق استدعاء وظيفة `next()`:

``` javascript
var CombinedStream = require('combined-stream');
var fs = require('fs');

var combinedStream = CombinedStream.create();
combinedStream.append(function(next) {
  next(fs.createReadStream('file1.txt'));
});
combinedStream.append(function(next) {
  next(fs.createReadStream('file2.txt'));
});

combinedStream.pipe(fs.createWriteStream('combined.txt'));
```

## <a name="api"></a>واجهة برمجة التطبيقات (API) 

### <a name="combinedstreamcreateoptions"></a>CombinedStream.create([options])

إرجاع كائن دفق مدمج جديد. الخيارات المتاحة هي:

* `maxDataSize`
* `pauseStreams`

ويرد أدناه وصف لأثر هذه الخيارات.

### <a name="combinedstreampausestreams--true"></a>combinedStream.pauseStreams = `true`

ما إذا كان سيتم تطبيق الضغط الخلفي على الجداول السفلية. إذا تم ضبطه على `false`، فلن يتم إيقاف التدفقات السفلية مؤقتًا. إذا تم ضبطها على `true`، سيتم إيقاف الجداول السفلية مؤقتًا مباشرة بعد إلحاقها، وكذلك عندما تريد `delayedStream.pipe()` التقييد.

### <a name="combinedstreammaxdatasize--2--1024--1024"></a>combinedStream.maxDataSize = `2 * 1024 * 1024`

الحد الأقصى لمقدار البايتات (أو الأحرف) للتخزين المؤقت لجميع تدفقات المصدر.
إذا تم تجاوز هذه القيمة، فسيصدر `combinedStream` حدث `'error'`.

### <a name="combinedstreamdatasize--0"></a>combinedStream.dataSize = `0`

مقدار البايتات (أو الأحرف) التي يتم تخزينها مؤقتًا حاليًا بواسطة `combinedStream`.

### <a name="combinedstreamappendstream"></a>combinedStream.append(stream)

إلحاق المعطى `stream` بالكائن combinedStream. إذا تم تعيين `pauseStreams` على true، أيضًا إيقاف هذا البث مؤقتًا على الفور.

يمكن أن يكون `streams` أيضًا دالة يأخذ معلمة واحدة تسمى `next`. `next` هي وظيفة يجب استدعاؤها من أجل توفير `next` الدفق، انظر المثال أعلاه.

بغض النظر عن كيفية `stream` إلحاق، يقوم الدفق المشترك دائمًا بإرفاق مستمع `'error'` به، لذلك لا يتعين عليك القيام بذلك يدويًا.

حالة خاصة: يمكن أن تكون `stream` أيضًا سلسلة أو المخزن المؤقت.

### <a name="combinedstreamwritedata"></a>combinedStream.write(data)

يجب ألا تستدعي هذا، `combinedStream` وتهتم بتوصيل التدفقات الملحقة إلى نفسها من أجلك.

### <a name="combinedstreamresume"></a>combinedStream.resume()

يسبب `combinedStream` لبدء استنزاف الجداول التي تديرها. الوظيفة غير فعالة، وتنبعث منها أيضًا حدث `'resume'` في كل مرة يذهب عادة إلى التيار الذي يتم استنزافه حاليًا.

### <a name="combinedstreampause"></a>combinedStream.pause();

إذا `combinedStream.pauseStreams` تم تعيينه على `false`، فهذا لا يفعل شيئًا.
خلاف ذلك ينبعث حدث `'pause'`، وهذا يذهب إلى التيار الذي يتم استنزافه حاليًا، حتى تتمكن من استخدامه لتطبيق الضغط الخلفي.

### <a name="combinedstreamend"></a>combinedStream.end();

يضبط `combinedStream.writable` على false، وينبعث منه حدث `'end'`، ويزيل جميع التدفقات من قائمة الانتظار.

### <a name="combinedstreamdestroy"></a>combinedStream.destroy();

مثل `combinedStream.end()`، إلا أنه ينبعث منه حدث `'close'` بدلًا من `'end'`.

## <a name="license"></a>الترخيص

يتم ترخيص البث المشترك بموجب ترخيص معهد ماساتشوستس للتكنولوجيا.

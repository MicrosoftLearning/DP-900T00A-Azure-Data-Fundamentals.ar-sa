---
ms.openlocfilehash: ca1f677bd38876befee833fcedd10388a71aecf4
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138052934"
---
<a name="agent-base"></a>agent-base
==========
### <a name="turn-a-function-into-an-httpagenthttpagent-instance"></a>حول دالة إلى مثيل [`http.Agent`][http.Agent]
[![Build Status](https://github.com/TooTallNate/node-agent-base/workflows/Node%20CI/badge.svg)](https://github.com/TooTallNate/node-agent-base/actions?workflow=Node+CI)

توفر هذه الوحدة مولد `http.Agent`. أي أنك تمررها وظيفة معاودة الاتصال غير المتزامنة، وتقوم بإرجاع مثيل جديد `http.Agent` يستدعي وظيفة معاودة الاتصال المحددة عند إرسال طلبات HTTP الصادرة.

#### <a name="some-subclasses"></a>بعض الفئات الفرعية:

فيما يلي بعض الاستخدامات الأكثر إثارة للاهتمام لـ`agent-base`.
أرسل طلب سحب لإدراج طلبك!

 * [`http-proxy-agent`][http-proxy-agent]: نقاط نهاية تطبيق وكيل `http.Agent` HTTP(s) لـHTTP
 * [`https-proxy-agent`][https-proxy-agent]: نقاط نهاية تطبيق وكيل `http.Agent` HTTP(s) لـHTTPS
 * [`pac-proxy-agent`][pac-proxy-agent]: ملف وكيل PAC `http.Agent` تطبيق لـHTTP وHTTPS
 * [`socks-proxy-agent`][socks-proxy-agent]: ملف وكيل SOCKS `http.Agent` تطبيق لـHTTP وHTTPS


<a name="installation"></a>التثبيت
------------

تثبيت مع `npm`:

``` bash
$ npm install agent-base
```


<a name="example"></a>مثال
-------

فيما يلي مثال بسيط ينشئ اتصالاً جديداً `net.Socket` بالخادم لكل طلب HTTP (أي ما يعادل الخيار `agent: false`):

```js
var net = require('net');
var tls = require('tls');
var url = require('url');
var http = require('http');
var agent = require('agent-base');

var endpoint = 'http://nodejs.org/api/';
var parsed = url.parse(endpoint);

// This is the important part!
parsed.agent = agent(function (req, opts) {
  var socket;
  // `secureEndpoint` is true when using the https module
  if (opts.secureEndpoint) {
    socket = tls.connect(opts);
  } else {
    socket = net.connect(opts);
  }
  return socket;
});

// Everything else works just like normal...
http.get(parsed, function (res) {
  console.log('"response" event!', res.headers);
  res.pipe(process.stdout);
});
```

يتم أيضاً دعم إرجاع وعد أو استخدام وظيفة `async`:

```js
agent(async function (req, opts) {
  await sleep(1000);
  // etc…
});
```

إرجاع مثيل آخر `http.Agent` "لتمرير" المسؤولية عن طلب HTTP هذا إلى هذا الوكيل:

```js
agent(function (req, opts) {
  return opts.secureEndpoint ? https.globalAgent : http.globalAgent;
});
```


<a name="api"></a>واجهة برمجة التطبيقات (API) 
---

## <a name="agentfunction-callback-object-options--httpagent"></a>Agent(Function callback[, Object options]) → [http.Agent][]

ينشئ قاعدة `http.Agent` تقوم بتنفيذ وظيفة معاودة الاتصال `callback` لكل طلب HTTP يتم استخدامه كطلب `agent`. وظيفة معاودة الاتصال مسؤولة عن إنشاء مثيل `stream.Duplex` من نوع ما سيتم استخدامه كمقبس أساسي في طلب HTTP.

عنصر `options` يقبل الخصائص التالية:

  * `timeout` - رقم - مهلة للوظيفة `callback()` بالمللي ثانية. الإعدادات الافتراضية إلى Infinity (اختياري).

يجب أن يكون لوظيفة معاودة الاتصال التوقيع التالي:

### <a name="callbackhttpclientrequest-req-object-options-function-cb--undefined"></a>callback(http.ClientRequest req, Object options, Function cb) → undefined

ClientRequest `req` يمكن الوصول إليها لقراءة عناوين الطلبات والمسار وما إلى ذلك. يحتوي العنصر `options` على الخيارات الممرة إلى استدعاء الدالة `http.request()`/`https.request()`، وتم تنسيقه ليتم تمريره بشكل مباشر إلى `net.connect()`/`tls.connect()`، أو أي Socket أنشأته تريده. قم بتمرير المقبس الذي تم إنشاؤه إلى وظيفة معاودة الاتصال `cb` بمجرد إنشائها، وسيستمر طلب HTTP في المتابعة.

إذا تم استخدام الوحدة النمطية `https` لاستدعاء طلب HTTP، يتم تعيين الخاصية `secureEndpoint` الموجودة على `options` _إلى `true`_ .


<a name="license"></a>الترخيص
-------

(رخصة معهد ماساتشوستس للتكنولوجيا)

حقوق الطبع والنشر (ج) 2013 Nathan Rajlich &lt;nathan@tootallnate.net&gt;

يتم منح الإذن بموجب هذا، مجانًا، لأي شخص يحصل على نسخة من هذا البرنامج وملفات الوثائق المرتبطة به ("البرنامج")، للتعامل في البرنامج دون قيود، بما في ذلك على سبيل المثال لا الحصر حقوق استخدام البرنامج ونسخه وتعديله ودمجه ونشره وتوزيعه وترخيصه من الباطن و/أو بيع نسخ منه، والسماح للأشخاص الذين تم تزويد البرنامج بهم بالقيام بذلك، تخضع للشروط التالية:

يجب تضمين إشعار حقوق الطبع والنشر أعلاه وإشعار الإذن هذا في جميع النسخ أو أجزاء كبيرة من البرنامج.

يتم توفير البرنامج "كما هو"، دون ضمان من أي نوع، صريح أو ضمني، بما في ذلك على سبيل المثال لا الحصر ضمانات التسويق والملاءمة لغرض معين وعدم الانتهاك.
لا يتحمل المؤلفون أو أصحاب حقوق الطبع والنشر بأي حال من الأحوال المسؤولية عن أي مطالبة أو أضرار أو مسؤولية أخرى، سواء في إجراء تعاقدي أو ضرر أو غير ذلك، تنشأ عن أو فيما يتعلق بالبرنامج أو الاستخدام أو التعاملات الأخرى في البرنامج.

[http-proxy-agent]: https://github.com/TooTallNate/node-http-proxy-agent
[https-proxy-agent]: https://github.com/TooTallNate/node-https-proxy-agent
[pac-proxy-agent]: https://github.com/TooTallNate/node-pac-proxy-agent
[socks-proxy-agent]: https://github.com/TooTallNate/node-socks-proxy-agent
[http.Agent]: https://nodejs.org/api/http.html#http_class_http_agent

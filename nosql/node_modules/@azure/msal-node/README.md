---
ms.openlocfilehash: 05bea0332c8376e66d4aed62eab42a50c744536d
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050102"
---
# <a name="microsoft-authentication-library-for-node-msal-node"></a>Microsoft Authentication Library for Node (msal-node)

[![npm version](https://img.shields.io/npm/v/@azure/msal-node.svg?style=flat)](https://www.npmjs.com/package/@azure/msal-node/)[![npm version](https://img.shields.io/npm/dm/@azure/msal-node.svg)](https://nodei.co/npm/@azure/msal-node/)[![Coverage Status](https://coveralls.io/repos/github/AzureAD/microsoft-authentication-library-for-js/badge.svg?branch=dev)](https://coveralls.io/github/AzureAD/microsoft-authentication-library-for-js?branch=dev)

| <a href="https://docs.microsoft.com/azure/active-directory/develop/guidedsetups/active-directory-javascriptspa" target="_blank">البدء</a> | <a href="https://aka.ms/aaddevv2" target="_blank">مستندات AAD (دليل Azure النشط)</a> | <a href="https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_node.html" target="_blank">مرجع المكتبة</a> |
| --- | --- | --- |

حالياً `msal-node` قيد التطوير، يرجى تتبع تقدم المشروع [هنا](https://github.com/AzureAD/microsoft-authentication-library-for-js/projects/4). هذه الوثائق قيد التقدم أيضاً وستتغير مع إصدارنا لتصحيحاتنا `alpha`. **لا نوصي باستخدام هذا في بيئة الإنتاج حتى الآن**.

1. [حول](#about)
2. [الأسئلة المتداولة](#faq)
3. [الإصدارات](#releases)
4. [المتطلبات الأساسية](#prerequisites)
5. [التثبيت](#installation)
6. [الاستخدام](#usage)
7. [عينات](#samples)
8. [بناء مكتبة](#build-and-test)
9. [التقارير الأمنية](#security-reporting)
10. [الترخيص](#license)
11. [قواعد السلوك](#we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct)

## <a name="about"></a>حول

تمكن عقدة MSAL التطبيقات من مصادقة المستخدمين باستخدام حسابات العمل والمدرسة [Azure AD (AAD (دليل Azure النشط))](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-overview) وحسابات Microsoft الشخصية (MSA) وموفري الهوية الاجتماعية مثل Facebook و Google و LinkedIn وحسابات Microsoft وما إلى ذلك من خلال خدمة [Azure AD B2C](https://docs.microsoft.com/en-us/azure/active-directory-b2c/active-directory-b2c-overview#identity-providers). كما أنه يمكن تطبيقك من الحصول على رموز مميزة للوصول إلى خدمات [Microsoft Cloud](https://www.microsoft.com/enterprise) مثل [Microsoft Graph](https://graph.microsoft.io).


### <a name="oauth20-grant-types-supported"></a>أنواع المنح OAuth2.0 المدعومة:

يدعم إصدار ألفا الحالي الطرق التالية للحصول على الرموز المميزة:

#### <a name="public-client"></a>العميل العام:
- [منح رمز التفويض](https://oauth.net/2/grant-types/authorization-code/) مع [PKCE](https://oauth.net/2/pkce/)
- [منح رمز الجهاز](https://oauth.net/2/grant-types/device-code/)
- [منح رمز التحديث](https://oauth.net/2/grant-types/refresh-token/)
- [التدفق الصامت](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-acquire-cache-tokens#acquiring-tokens-silently-from-the-cache)

#### <a name="confidential-client"></a>العميل السري:
- [منح رمز التفويض](https://oauth.net/2/grant-types/authorization-code/) مع بيانات اعتماد العميل
- [منح رمز التحديث](https://oauth.net/2/grant-types/refresh-token/)
- [التدفق الصامت](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-acquire-cache-tokens#acquiring-tokens-silently-from-the-cache)
- [منحة اعتماد العميل](https://oauth.net/2/grant-types/client-credentials/)
- [نيابة عن التدفق](https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow)

**[قريباً]** في المستقبل، نخطط لإضافة دعم لما يلي:
- [تدفق مصادقة Windows المتكاملة](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#integrated-windows-authentication)
- [تدفق اسم المستخدم وكلمة المرور](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows#usernamepassword)

يمكن العثور على مزيد من التفاصيل حول أنواع المنح المختلفة التي تدعمها مكتبات مصادقة Microsoft بشكل عام [هنا](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-authentication-flows).

### <a name="scenarios-supported"></a>السيناريوهات المدعومة:

السيناريوهات المدعومة مع هذه المكتبة هي:
- تطبيق سطح المكتب الذي يستدعي واجهات برمجة تطبيقات الويب
- تطبيق ويب يستدعي واجهات برمجة تطبيقات الويب
- واجهات برمجة تطبيقات الويب API التي تستدعي واجهة برمجة تطبيقات الويب
- تطبيقات Daemon

يمكن العثور على مزيد من التفاصيل حول السيناريوهات وتدفقات المصادقة التي يتم تعيينها لكل منها [هنا](https://docs.microsoft.com/en-us/azure/active-directory/develop/authentication-flows-app-scenarios).

## <a name="faq"></a>الأسئلة المتداولة

انظر [هنا](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/faq.md).

## <a name="prerequisites"></a>المتطلبات الأساسية

قبل استخدام `@azure/msal-node`، ستحتاج إلى تسجيل تطبيقك في مدخل azure:

- [تسجيل تطبيق](https://docs.microsoft.com/en-us/graph/auth-register-app-v2)

## <a name="installation"></a>التثبيت

### <a name="via-npm"></a>عبر NPM:
```javascript
npm install @azure/msal-node
```
##  <a name="usage"></a>الاستخدام

### <a name="msal-basics"></a>أساسيات MSAL
- [فهم الفرق بين العميل العام والعملاء السريين](https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-client-applications)
- [تهيئة تطبيق عميل عام](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/initialize-public-client-application.md)
- [تهيئة تطبيق عميل سري](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/initialize-confidential-client-application.md)
- [التكوين](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-node/docs/configuration.md)
- [Request](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/request.md)
- ⁦[⁩استجابة⁦](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-common/docs/response.md)⁩

## <a name="samples"></a>عينات
هناك [عينات](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples) متعددة مضمنة في المستودع تستخدم عقدة MSAL للحصول على الرموز المميزة. وتستخدم هذه العينات حالياً للاختبار اليدوي، وليس المقصود منها أن تكون مرجعاً لأفضل الممارسات، وبالتالي تستخدم الحكم ولا تنسخ هذه الشفرة بشكل أعمى إلى أي تطبيقات إنتاج.

- [auth-code](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/auth-code): تطبيق سريع يستخدم تدفق تخويل التعليمة البرمجية OAuth2.0.
- [device-code](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/device-code): سطر الأوامر يستخدم تدفق جهاز التعليمة البرمجية OAuth 2.0.
- [refresh-token](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/refresh-token): سطر الأوامر يستخدم تدفق التحديث OAuth 2.0.
- [silent-flow](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/silent-flow): تطبيق Express باستخدام تدفق رمز تفويض OAuth2.0 للحصول على رمز مميز وتخزينه في ذاكرة التخزين المؤقت للرمز المميز، والتدفق الصامت لاستخدام الرموز المميزة في ذاكرة التخزين المؤقت للرمز المميز.
- [client-credentials](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/client-credentials): تطبيق مساعد يستخدم منحة عميل سري Oauth 2.0 للحصول على رمز مميز.
- [on-behalf-of](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/samples/msal-node-samples/standalone-samples/on-behalf-of): تطبيق ويب يستخدم تدفق التعليمة البرمجية للتخويل Oauth 2.0 للحصول على رمز معين لواجهة برمجة التطبيقات الويب. تقوم واجهة برمجة تطبيقات الويب بالتحقق من صحة الرمز المميز، وتستدعي Microsoft Graph نيابة عن المستخدم الذي قام بالمصادقة في تطبيق الويب.
- [msal-node-extensions](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/extensions/samples/msal-node-extensions): يستخدم تدفق التعليمة البرمجية للتخويل للحصول على مكتبة [msal-extensions](https://github.com/AzureAD/microsoft-authentication-library-for-js/tree/dev/extensions/) لكتابة ذاكرة تخزين مؤقت الرمز المميز لـMSAL في الذاكرة إلى القرص.

## <a name="build-and-test"></a>الإنشاء والاختبار

- إن لم تمتلك [lerna](https://github.com/lerna/lerna) مثبتًا، شغل `npm install -g lerna`
- تشغيل `lerna bootstrap` من أي مكان داخل `microsoft-authentication-library-for-js.git`.
- الانتقال إلى `microsoft-authentication-library-for-js/lib/msal-common` وتشغيل `npm run build`
- الانتقال إلى `microsoft-authentication-library-for-js/lib/msal-node` وتشغيل `npm run build`

```javascript
// to link msal-node and msal-common packages
lerna bootstrap

// Change to the msal-node package directory
cd lib/msal-common/

// To run build only for node package
npm run build

// Change to the msal-node package directory
cd lib/msal-node/

// To run build only for node package
npm run build
```

### <a name="local-development"></a>التنمية المحلية
فيما يلي قائمة بالأوامر التي ربما تجدها مفيدة:

#### `npm run build:modules:watch`
يدير المشروع في وضع التطوير / المشاهدة. سيتم إعادة بناء مشروعك بناء على التغييرات. يحتوي TSDX على مسجل خاص لراحتك. رسائل خطأ مطبوعة ومنسقة بشكل جيد للتوافق مع علامة تبويب Code's Problems. سيعاد بناء المكتبة إن قمت بتعديلات.

#### `npm run build`
حزم الحزمة إلى المجلد `dist`.
تم تحسين الحزمة وتجميعها مع Rollup في تنسيقات متعددة (CommonJS وUMD وES Module).

#### `lerna bootstrap`
إذا كنت تقوم بتشغيل المشروع في وضع التطوير / المشاهدة، أو قمت بإجراء تغييرات في المشروع `msal-common` وتحتاج إلى عكسها عبر المشروع، فيرجى تشغيل `lerna bootstrap` لربط جميع الرموز. يرجى ملاحظة أن `npm install` سيلغي ربط كل التعليمات البرمجية، وبالتالي ينصح بتشغيل التثبيت اللاحق لـ`lerna bootstrap`.

#### `npm run lint`
يدير eslint مع Prettier

#### <a name="npm-test-npm-run-testcoverage-npm-run-testwatch"></a>`npm test`, `npm run test:coverage`, `npm run test:watch`
يقوم بتشغيل مراقب الاختبار (Jest) في وضع تفاعلي.
بشكل افتراضي، يتم تشغيل الاختبارات المتعلقة بالملفات التي تم تغييرها منذ الالتزام الأخير.
إنشاء تغطية التعليمات البرمجية عن طريق إضافة العلم --coverage. لا حاجة إلى إعداد إضافي. يمكن لـ Jest جمع معلومات تغطية التعليمات البرمجية من المشاريع بأكملها، بما في ذلك الملفات التي لم يتم اختبارها.

## <a name="security-reporting"></a>التقارير الأمنية

إذا وجدت مشكلة أمنية في مكتباتنا أو خدماتنا، فيرجى الإبلاغ عنها إلى [secure@microsoft.com](mailto:secure@microsoft.com) بأكبر قدر ممكن من التفاصيل. قد تكون عملية الإرسال الخاصة بك مؤهلة للحصول على مكافأة من خلال برنامج [Microsoft Bounty](http://aka.ms/bugbounty). يرجى عدم نشر مشكلات الأمان على GitHub المشكلات أو أي موقع عام آخر. سوف نتصل بك بمجرد تلقي المعلومات. نحن نشجعك على تلقي إشعارات عند وقوع حوادث أمنية من خلال زيارة [هذه الصفحة](https://technet.microsoft.com/security/dd252948) والاشتراك في التنبيهات الاستشارية الأمنية.

## <a name="license"></a>الترخيص

Copyright (c) Microsoft Corporation.  جميع الحقوق محفوظة. مرخص بموجب ترخيص معهد ماساتشوستس للتكنولوجيا.

## <a name="we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct"></a>نحن نقدر ونلتزم بمدونة قواعد السلوك مفتوحة المصدر من Microsoft

اعتمد هذا المشروع [مدونة السلوك من المصادر المفتوحة من Microsoft.](https://opensource.microsoft.com/codeofconduct/) لمزيد من المعلومات، راجع [الأسئلة الشائعة حول مدونة قواعد السلوك](https://opensource.microsoft.com/codeofconduct/faq/) أو الاتصال بـ[opencode@microsoft.com](mailto:opencode@microsoft.com) لأي أسئلة أو تعليقات إضافية.


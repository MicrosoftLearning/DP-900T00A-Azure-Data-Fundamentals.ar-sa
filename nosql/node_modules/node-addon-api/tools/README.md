---
ms.openlocfilehash: 3decbdeed6f0c742925a5be9b78f5251a4c0b569
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138049981"
---
# <a name="tools"></a>الأدوات

## <a name="clang-format"></a>clang-format

تم تصميم أدوات التحقق بتنسيق clang للتحقق من خطوط التعليمات البرمجية المتغيرة مقارنة بـgit-refs المحددة.

## <a name="migration-script"></a>البرنامج النصي للترحيل

تم تصميم أداة الترحيل لتقليل العمل المتكرر في عملية الترحيل. ومع ذلك، فإن البرنامج النصي لا يهدف إلى تحويل كل شيء لك. عادة ما تكون هناك بعض الإصلاحات الصغيرة وإعادة الإعمار الرئيسية المطلوبة.

### <a name="how-to-use"></a>كيفية الاستخدام

لتشغيل البرنامج النصي للتحويل، تأكد أولاً من أن لديك `node-addon-api` الأحدث في دليلك `node_modules`.
```
npm install node-addon-api
```

ثم قم بتشغيل البرنامج النصي الذي يمر عبر دليل المشروع الخاص بك
```
node ./node_modules/node-addon-api/tools/conversion.js ./
```

بعد الانتهاء، قم بإعادة ترجمة وتصحيح الأخطاء التي فاتتها البرامج النصية.


### <a name="quick-fixes"></a>حلول سريعة
فيما يلي قائمة بالأشياء التي يمكن إصلاحها بسهولة.
  1. قم بتغيير قيمة إرجاع أساليبك إلى لاغية إذا لم تقم بإرجاع القيمة إلى جافا سكريبت.
  2. استخدم `.` للوصول إلى السمة أو لاستدعاء وظيفة العضو في Napi::Object بدلاً من `->`.
  3. `Napi::New(env, value);` إلى 'Napi::[النوع]::New(env, value);


### <a name="major-reconstructions"></a>عمليات إعادة الإعمار الرئيسية
ويختلف تنفيذ `Napi::ObjectWrap` اختلافاً كبيراً عن تنفيذ هذه NAN. `Napi::ObjectWrap` يأخذ مؤشراً إلى الكائن الملفوف وينشئ مرجعاً إلى الكائن الملفوف داخل منشئ ObjectWrap. `Napi::ObjectWrap` يربط أيضاً طرق مثيل الكائن الملفوف بوحدة جافا سكريبت بدلاً من الطرق الثابتة مثل NAN.

لذلك إذا كنت تستخدم Nan::ObjectWrap في الوحدة النمطية الخاصة بك، فستحتاج إلى تنفيذ الخطوات التالية.

  1. قم بتحويل دالة [ClassName]::New إلى دالة منشئ تأخذ `Napi::CallbackInfo`. أعلنها على أنها
```
[ClassName](const Napi::CallbackInfo& info);
```
وتعريفها على أنها
```
[ClassName]::[ClassName](const Napi::CallbackInfo& info) : Napi::ObjectWrap<[ClassName]>(info){
  ...
}
```
بهذه الطريقة، سيتم استدعاء المنشئ `Napi::ObjectWrap` بعد إنشاء مثيل للكائن ويمكن لـ`Napi::ObjectWrap` استخدام المؤشر `this` لإنشاء مرجع إلى الكائن الملفوف.

  2. انقل التعليمات البرمجية للمنشئ الأصلي إلى المنشئ الجديد. احذف المنشئ الأصلي.
  3. في وظيفة تهيئة الفصل الدراسي الخاص بك، قم بإقران الأساليب الأصلية بالطريقة التالية.
```
Napi::FunctionReference constructor;

void [ClassName]::Init(Napi::Env env, Napi::Object exports, Napi::Object module) {
  Napi::HandleScope scope(env);
  Napi::Function ctor = DefineClass(env, "Canvas", {
    InstanceMethod<&[ClassName]::Func1>("Func1"),
    InstanceMethod<&[ClassName]::Func2>("Func2"),
    InstanceAccessor<&[ClassName]::ValueGetter>("Value"),
    StaticMethod<&[ClassName]::StaticMethod>("MethodName"),
    InstanceValue("Value", Napi::[Type]::New(env, value)),
  });

  constructor = Napi::Persistent(ctor);
  constructor .SuppressDestruct();
  exports.Set("[ClassName]", ctor);
}
```
  4. في الدالة حيث تحتاج إلى إلغاء التفاف ObjectWrap في NAN مثل `[ClassName]* native = Nan::ObjectWrap::Unwrap<[ClassName]>(info.This());`، استخدم `this` المؤشر مباشرة ككائن غير ملفوف حيث أن كل مثيل ObjectWrap مقترن بمثيل كائن فريد.


إذا كنت لا تزال تجد مشكلات بعد اتباع هذا الدليل، فيرجى ترك مشكلة تصف مشكلتك وسنحاول حلها.

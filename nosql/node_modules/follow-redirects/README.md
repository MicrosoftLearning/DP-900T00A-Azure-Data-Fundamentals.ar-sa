---
ms.openlocfilehash: aa7ddb2f2ce7709064cf5157f709fc1eff52cff7
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050094"
---
## <a name="follow-redirects"></a>متابعة عمليات إعادة التوجيه

استبدال الوحدات النمطية `http` و`https` لـNode التي تتبع عمليات إعادة التوجيه تلقائيًا.

[![npm version](https://img.shields.io/npm/v/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Build Status](https://github.com/follow-redirects/follow-redirects/workflows/CI/badge.svg)](https://github.com/follow-redirects/follow-redirects/actions)
[![Coverage Status](https://coveralls.io/repos/follow-redirects/follow-redirects/badge.svg?branch=master)](https://coveralls.io/r/follow-redirects/follow-redirects?branch=master)
[![npm downloads](https://img.shields.io/npm/dm/follow-redirects.svg)](https://www.npmjs.com/package/follow-redirects)
[![Sponsor on GitHub](https://img.shields.io/static/v1?label=Sponsor&message=%F0%9F%92%96&logo=GitHub)](https://github.com/sponsors/RubenVerborgh)

يوفر `follow-redirects` [الطلب](https://nodejs.org/api/http.html#http_http_request_options_callback) و[الحصول](https://nodejs.org/api/http.html#http_http_get_options_callback) على طرق تتصرف بشكل مطابق لتلك الموجودة على وحدات [http](https://nodejs.org/api/http.html#http_http_request_options_callback) و[https](https://nodejs.org/api/https.html#https_https_request_options_callback) الأصلية، باستثناء أنها ستتبع عمليات إعادة التوجيه بسلاسة.

```javascript
const { http, https } = require('follow-redirects');

http.get('http://bit.ly/900913', response => {
  response.on('data', chunk => {
    console.log(chunk);
  });
}).on('error', err => {
  console.error(err);
});
```

يمكنك فحص عنوان URL النهائي المعاد توجيهه من خلال الخاصية `responseUrl` على `response`.
إذا لم تحدث إعادة توجيه، فـ`responseUrl` هو عنوان URL الأصلي للطلب.

```javascript
const request = https.request({
  host: 'bitly.com',
  path: '/UHfDGO',
}, response => {
  console.log(response.responseUrl);
  // 'http://duckduckgo.com/robots.txt'
});
request.end();
```

## <a name="options"></a>الخيارات
### <a name="global-options"></a>الخيارات العامة
يتم تعيين الخيارات العامة مباشرة على الوحدة `follow-redirects`:

```javascript
const followRedirects = require('follow-redirects');
followRedirects.maxRedirects = 10;
followRedirects.maxBodyLength = 20 * 1024 * 1024; // 20 MB
```

يتم دعم الخيارات التالية:

- `maxRedirects` (افتراضي: `21`) - يحدد الحد الأقصى لعدد عمليات إعادة التوجيه المسموح بها؛ إذا تم تجاوزه، يتم إصدار خطأ.

- `maxBodyLength` (افتراضي: 10 ميغابايت) - يحدد الحد الأقصى لحجم نص الطلب؛ إذا تم تجاوزه، يتم إصدار خطأ.

### <a name="per-request-options"></a>خيارات لكل طلب
يتم تعيين خيارات كل طلب عن طريق تمرير كائن `options`:

```javascript
const url = require('url');
const { http, https } = require('follow-redirects');

const options = url.parse('http://bit.ly/900913');
options.maxRedirects = 10;
options.beforeRedirect = (options, { headers }) => {
  // Use this to adjust the request options upon redirecting,
  // to inspect the latest response headers,
  // or to cancel the request by throwing an error
  if (options.hostname === "example.com") {
    options.auth = "user:password";
  }
};
http.request(options);
```

بالإضافة إلى [خياراتHTTP](https://nodejs.org/api/http.html#http_http_request_options_callback) و[HTTPS القياسية](https://nodejs.org/api/https.html#https_https_request_options_callback)، يتم دعم الخيارات التالية لكل طلب:
- `followRedirects` (افتراضي: `true`) - ما إذا كان ينبغي اتباع عمليات إعادة التوجيه.

- `maxRedirects` (افتراضي: `21`) - يحدد الحد الأقصى لعدد عمليات إعادة التوجيه المسموح بها؛ إذا تم تجاوزه، يتم إصدار خطأ.

- `maxBodyLength` (افتراضي: 10 ميغابايت) - يحدد الحد الأقصى لحجم نص الطلب؛ إذا تم تجاوزه، يتم إصدار خطأ.

- `beforeRedirect` (افتراضي: `undefined`) – اختياريًا تغيير الطلب على عمليات إعادة التوجيه، أو إيقاف الطلب `options` عن طريق إلقاء خطأ.

- `agents` (افتراضي: `undefined`) - يحدد الخيار `agent` لكل بروتوكول، نظرًا لأن HTTP وHTTPS يستخدمان عوامل مختلفة. قيمة المثال: `{ http: new http.Agent(), https: new https.Agent() }`

- `trackRedirects` (افتراضي: `false`) - ما إذا كان سيتم تخزين تفاصيل الاستجابة المعاد توجيهها في الصفيف `redirects` على كائن الاستجابة.


### <a name="advanced-usage"></a>الاستخدام المتقدم
بشكل افتراضي، `follow-redirects` سيستخدم Node.js التطبيقات الافتراضية لـ[`http`](https://nodejs.org/api/http.html) و[`https`](https://nodejs.org/api/https.html).
لتمكين ميزات مثل التخزين المؤقت و/أو تتبع الطلبات الوسيطة، قد ترغب بدلًا من ذلك في تضمين `follow-redirects` حول تطبيقات البروتوكول المخصصة:

```javascript
const { http, https } = require('follow-redirects').wrap({
  http: require('your-custom-http'),
  https: require('your-custom-https'),
});
```

هذه البروتوكولات المخصصة تحتاج فقط إلى تنفيذ الطريقة `request`.

## <a name="browser-usage"></a>استخدام المتصفح

نظرًا للطريقة التي يعمل بها المتصفح، تقوم مكافئات المتصفح `http` و`https` بإجراء عمليات إعادة التوجيه بشكل افتراضي.

من خلال طلب هذه الطريقة `follow-redirects`:
```javascript
const http = require('follow-redirects/http');
const https = require('follow-redirects/https');
```
يمكنك بسهولة إخبار webpack والأصدقاء لاستبدالهم `follow-redirect` بالإصدارات المدمجة:

```json
{
  "follow-redirects/http"  : "http",
  "follow-redirects/https" : "https"
}
```

## <a name="contributing"></a>المساهمة

طلبات السحب هي دائمًا موضع ترحيب. يرجى [تقديم ملف يوضح](https://github.com/follow-redirects/follow-redirects/issues) بالتفصيل اقتراحك قبل استثمار وقتك الثمين. يجب أن تكون الميزات الإضافية وإصلاحات الأخطاء مصحوبة باختبارات. يمكنك تشغيل مجموعة الاختبار محليًا بأمر `npm test` بسيط.

## <a name="debug-logging"></a>تسجيل التصحيح

يستخدم `follow-redirects` [الإصلاح](https://www.npmjs.com/package/debug) الرائع للتسجيل. لتشغيل التسجيل، قم بتعيين متغير `DEBUG=follow-redirects` البيئة لإخراج التصحيح من هذه الوحدة النمطية فقط. عند تشغيل مجموعة الاختبار، يكون من المفيد في بعض الأحيان تعيين `DEBUG=*` لرؤية الإخراج من الخادم السريع أيضًا.

## <a name="authors"></a>المؤلفون

- [Ruben Verborgh](https://ruben.verborgh.org/)
- [Olivier Lalonde](mailto:olalonde@gmail.com)
- [James Talmage](mailto:james@talmage.io)

## <a name="license"></a>الترخيص

[MIT License](https://github.com/follow-redirects/follow-redirects/blob/master/LICENSE)

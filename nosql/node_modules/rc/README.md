---
ms.openlocfilehash: 4f70d9e1d8895757244ec8464f178ff3068a36bd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138049954"
---
# <a name="rc"></a>rc

محمل التكوين غير القابل للتكوين للأشخاص الكسالى.

## <a name="usage"></a>الاستخدام

الخيار الوحيد هو تمرير اسم تطبيقك والتكوين الافتراضي.

```javascript
var conf = require('rc')(appname, {
  //defaults go here.
  port: 2468,

  //defaults which are objects will be merged, not replaced
  views: {
    engine: 'jade'
  }
});
```

سيقوم `rc` بإرجاع خيارات التكوين المدمجة مع الإعدادات الافتراضية التي تحددها.
إذا مررت في كائن افتراضي محدد مسبقًا، تحوره:

```javascript
var conf = {};
require('rc')(appname, conf);
```

إذا عثر `rc` على أي ملفات تكوين لتطبيقك، فسيحتوي كائن التكوين الذي تم إرجاعه `configs` على صفيف يحتوي على مساراته:

```javascript
var appCfg = require('rc')(appname, conf);
appCfg.configs[0] // /etc/appnamerc
appCfg.configs[1] // /home/dominictarr/.config/appname
appCfg.config // same as appCfg.configs[appCfg.configs.length - 1]
```

## <a name="standards"></a>المعايير

بالنظر إلى اسم التطبيق الخاص بك (`appname`)، ستبحث rc في جميع الأماكن الواضحة للتكوين.

  * وسيطات سطر الأوامر، يتم تحليلها بواسطة الحد الأدنى _(على سبيل المثال `--foo baz`، متداخلة أيضًا: `--foo.bar=baz`)_
  * متغيرات البيئة مسبوقة بـ`${appname}_`
    * أو استخدم "\_\_" للإشارة إلى الخصائص المتداخلة <br/> _(على سبيل المثال `appname_foo__bar__baz` => `foo.bar.baz`)_
  * إذا مررت خيارًا `--config file` من هذا الملف
  * `.${appname}rc` محلي أو أول من وُجد يبحث في `./ ../ ../../ ../../../` الخ.
  * `$HOME/.${appname}rc`
  * `$HOME/.${appname}/config`
  * `$HOME/.config/${appname}`
  * `$HOME/.config/${appname}/config`
  * `/etc/${appname}rc`
  * `/etc/${appname}/config`
  * الكائن الافتراضي الذي مررت فيه.

سيتم تسطيح كافة مصادر التكوين التي تم العثور عليها في كائن واحد، بحيث تتجاوز المصادر **السابقة** في هذه القائمة المصادر اللاحقة.


## <a name="configuration-file-formats"></a>تنسيقات ملفات التكوين

قد تكون ملفات التكوين (على سبيل المثال `.appnamerc`) إما بتنسيق [json](http://json.org/example) أو [ini](http://en.wikipedia.org/wiki/INI_file). **لا** ينبغي استخدام امتداد ملف (`.json` أو `.ini`). أمثلة التكوينات أدناه مكافئة:


#### <a name="formatted-as-ini"></a>منسّق كـ`ini`

```
; You can include comments in `ini` format if you want.

dependsOn=0.10.0


; `rc` has built-in support for ini sections, see?

[commands]
  www     = ./commands/www
  console = ./commands/repl


; You can even do nested sections

[generators.options]
  engine  = ejs

[generators.modules]
  new     = generate-new
  engine  = generate-backend

```

#### <a name="formatted-as-json"></a>منسّق كـ`json`

```javascript
{
  // You can even comment your JSON, if you want
  "dependsOn": "0.10.0",
  "commands": {
    "www": "./commands/www",
    "console": "./commands/repl"
  },
  "generators": {
    "options": {
      "engine": "ejs"
    },
    "modules": {
      "new": "generate-new",
      "backend": "generate-backend"
    }
  }
}
```

يتم تجريد التعليقات من تكوين JSON عبر [strip-json-comments](https://github.com/sindresorhus/strip-json-comments).

> نظرًا لأن متغيرات ini وenv لا تحتوي على معيار للأنواع، فيجب إعداد تطبيقك للسلاسل.

للتأكد من أن تمثيلات السلسلة للأرقام المنطقية والأرقام يتم تحويلها دائمًا إلى أنواعها المناسبة (مفيدة بشكل خاص إذا كنت تنوي إجراء مقارنات صارمة `===`)، فكر في استخدام وحدة نمطية مثل [تحليل السلاسل في الكائن](https://github.com/anselanza/parse-strings-in-object) للالتفاف على كائن التكوين الذي تم إرجاعه من rc.


## <a name="simple-example-demonstrating-precedence"></a>مثال بسيط يوضح الأسبقية
افترض أن لديك تطبيقًا مثل هذا (لاحظ الإعدادات الافتراضية المشفرة التي تم تمريرها إلى rc):
```
const conf = require('rc')('myapp', {
    port: 12345,
    mode: 'test'
});

console.log(JSON.stringify(conf, null, 2));
```
لديك أيضًا ملف `config.json`، مع هذه المحتويات:
```
{
  "port": 9000,
  "foo": "from config json",
  "something": "else"
}
```
وملف `.myapprc` في نفس المجلد، مع هذه المحتويات:
```
{
  "port": "3001",
  "foo": "bar"
}
```
فيما يلي الإخراج المتوقع من الأوامر المختلفة:

`node .`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "bar",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
يتم الاحتفاظ بالإعداد *الافتراضي`mode` من الكائن الذي تم ترميزه بشكل ثابت، ولكن يتم تجاوز المنفذ بواسطة الملف `.myapprc` (يتم العثور عليه تلقائيًا استنادًا إلى مطابقة اسم التطبيق)، ويتم إضافة `foo`.*


`node . --foo baz`
```
{
  "port": "3001",
  "mode": "test",
  "foo": "baz",
  "_": [],
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc"
  ],
  "config": "/Users/stephen/repos/conftest/.myapprc"
}
```
*نفس النتيجة كما هو موضح أعلاه ولكن `foo` يتم تجاوزها لأن وسيطات سطر الأوامر لها الأسبقية على الملف `.myapprc`.*

`node . --foo barbar --config config.json`
```
{
  "port": 9000,
  "mode": "test",
  "foo": "barbar",
  "something": "else",
  "_": [],
  "config": "config.json",
  "configs": [
    "/Users/stephen/repos/conftest/.myapprc",
    "config.json"
  ]
}
```
*الآن يأتي `port` من الملف المحدد `config.json` (تجاوز القيمة من `.myapprc`)، ويتم تجاوز القيمة `foo` بواسطة سطر الأوامر على الرغم من تحديده أيضًا في الملف `config.json`.*
 


## <a name="advanced-usage"></a>الاستخدام المتقدم

#### <a name="pass-in-your-own-argv"></a>تمرير في `argv`

يمكنك تمرير في `argv` الخاص بك كوسيطة ثالثة إلى `rc`.  هذا في حال كنت ترغب في [استخدام محلل اختيار سطر الأوامر الخاص بك](https://github.com/dominictarr/rc/pull/12).

```javascript
require('rc')(appname, defaults, customArgvParser);
```

## <a name="pass-in-your-own-parser"></a>تمرير في المحلل اللغوي الخاص بك

إذا كانت لديك حاجة خاصة لاستخدام محلل غير قياسي، فيمكنك القيام بذلك عن طريق تمرير المحلل اللغوي كوسيطة رابع.
(اترك الثالثة فارغ للحصول على محلل وسيطات الافتراضي)

```javascript
require('rc')(appname, defaults, null, parser);
```

يمكن أيضًا استخدام هذا لفرض تنسيق أكثر صرامة، مثل JSON الصارم والصالح فقط.

## <a name="note-on-performance"></a>ملاحظة حول الأداء

`rc` يشغل `fs.statSync`- لذا تأكد من عدم استخدامه في مسار التعليمات البرمجية الساخنة (على سبيل المثال معالج الطلبات) 


## <a name="license"></a>الترخيص

مرخص متعدد بموجب ترخيص BSD المكون من بندين، ترخيص MIT، أو ترخيص Apache، الإصدار 2.0

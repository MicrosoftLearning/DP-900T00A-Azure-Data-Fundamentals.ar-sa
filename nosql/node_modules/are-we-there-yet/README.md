---
ms.openlocfilehash: 34b661fbb1237d51bdab932626d19518225841a0
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050173"
---
<a name="are-we-there-yet"></a>are-we-there-yet
----------------

تتبع التسلسلات الهرمية المعقدة لحالات إكمال المهام غير المتزامنة.  يهدف هذا إلى منحك طريقة لتسجيل التقدم المحرز في المروحة المتكررة الكبيرة والإبلاغ عنها وجمع مهام سير العمل من النوع الشائعة جدًا في حالة عدم التزامن.

ما تفعله ببيانات الإكمال هذه متروك لك، ولكن حالة الاستخدام الأكثر شيوعًا هي إطعامها إلى واحدة من العديد من وحدات شريط التقدم.

تتضمن معظم وحدات شريط التقدم إصدارًا من هذا، لكن احتياجاتي كانت أكثر تعقيدًا.

<a name="usage"></a>الاستخدام
=====

```javascript
var TrackerGroup = require("are-we-there-yet").TrackerGroup

var top = new TrackerGroup("program")

var single = top.newItem("one thing", 100)
single.completeWork(20)

console.log(top.completed()) // 0.2

fs.stat("file", function(er, stat) {
  if (er) throw er  
  var stream = top.newStream("file", stat.size)
  console.log(top.completed()) // now 0.1 as single is 50% of the job and is 20% complete
                              // and 50% * 20% == 10%
  fs.createReadStream("file").pipe(stream).on("data", function (chunk) {
    // do stuff with chunk
  })
  top.on("change", function (name) {
    // called each time a chunk is read from "file"
    // top.completed() will start at 0.1 and fill up to 0.6 as the file is read
  })
})
```

<a name="shared-methods"></a>الأساليب المشتركة
==============

* var completed = tracker.completed()

نفذت في: `Tracker`، `TrackerGroup`، `TrackerStream`

ترجع هذه الدالة نسبة العمل المكتمل إلى العمل المطلوب إنجازه. نطاق من 0 إلى 1.

* tracker.finish()

نفذت في: `Tracker`، `TrackerGroup`

يضع علامة على المتعقب على أنه مكتمل. باستخدام TrackerGroup، يضع هذا علامة على جميع مكوناته على أنها مكتملة.

يضع علامة على جميع مكونات هذا المتعقب على أنها منتهية، مما يعني بدوره أن `tracker.completed()` لهذا سيكون الآن 1.

سيؤدي ذلك إلى انبعاث حدث `change` واحد أو أكثر.

<a name="events"></a>حدث
======

كافة كائنات التعقب تنبعث منها أحداث `change` مع الوسيطات التالية:

```
function (name, completed, tracker)
```

`name` هو اسم المتعقب الذي أصدر الحدث في الأصل، أو إذا لم يكن لديه واحد، فإن أول مجموعة تعقب تحتوي على واحدة.

`completed` هي النسبة المئوية للاكتمال (كما تم إرجاعها بالطريقة `tracker.completed()`).

`tracker` هو كائن التعقب الذي تستمع إليه للأحداث.

<a name="trackergroup"></a>TrackerGroup
============

* var tracker = new TrackerGroup(**name**)

  * **الاسم** *(اختياري)* - اسم مجموعة التعقب هذه، المستخدمة في إعلامات التغيير إذا لم يكن لتحديث المكون اسم. الإعدادات الافتراضية إلى غير محددة.

إنشاء مجموعة تجميع تعقب فارغة جديدة. هذه هي أجهزة التتبع التي يتم تحديد حالة اكتمالها من خلال حالة اكتمال أجهزة التتبع الأخرى.

* tracker.addUnit(**otherTracker**, **weight**)

  * **otherTracker** - أي من الكائنات الأخرى هي نحن هناك بعد تعقب
  * **weight** *(اختياري)* - الوزن لإعطاء المتعقب، افتراضيًا إلى 1.

إضافة **otherTracker** إلى مجموعة التجميع هذه. يحدد الوزن المدة التي تتوقع أن يستغرقها هذا المتعقب لإكماله بما يتناسب مع الوحدات الأخرى.  لذلك على سبيل المثال، إذا أضفت متعقب واحد بوزن 1 وآخر بوزن 2، فأنت تقول إن الثاني سيستغرق ضعف الوقت لإكماله الأول.  على هذا النحو، سيمثل الأول 33٪ من إكمال هذا المتعقب والثاني سيمثل 67٪ الأخرى.

إرجاع **otherTracker**.

* var subGroup = tracker.newGroup(**name**, **weight**)

ما بالأعلى مساوي تمامًا لـ:

```javascript
  var subGroup = tracker.addUnit(new TrackerGroup(name), weight)
```

* var subItem = tracker.newItem(**name**, **todo**, **weight**)

ما بالأعلى مساوي تمامًا لـ:

```javascript
  var subItem = tracker.addUnit(new Tracker(name, todo), weight)
```

* var subStream = tracker.newStream(**name**, **todo**, **weight**)

ما بالأعلى مساوي تمامًا لـ:

```javascript
  var subStream = tracker.addUnit(new TrackerStream(name, todo), weight)
```

* console.log( tracker.debug() )

إرجاع شجرة تظهر اكتمال مجموعة التعقب هذه وجميع فروعها، بما في ذلك الدخول المتكرر إلى جميع الفروع.

<a name="tracker"></a>متعقب
=======

* var tracker = new Tracker(**name**, **todo**)

  * **الاسم** *(اختياري)* اسم هذا العداد للإبلاغ عنه في أحداث التغيير.  الإعدادات الافتراضية إلى غير محددة.
  * **todo** *(اختياري)* مقدار العمل الذي يجب القيام به (رقم). الافتراضي 0.

عادة ما يتم إنشاؤها كجزء من مجموعة تعقب (عبر `newItem`).

* var completed = tracker.completed()

ترجع هذه الدالة نسبة العمل المكتمل إلى العمل المطلوب إنجازه. نطاق من 0 إلى 1. إذا كان إجمالي العمل الذي يتعين القيام به هو 0، فسيعود 0.

* tracker.addWork(**todo**)

  * **todo** رقم لإضافته إلى مقدار العمل الذي يتعين القيام به.

يزيد من حجم العمل الذي يتعين القيام به، وبالتالي يقلل من نسبة الإنجاز.  يؤدي إلى تشغيل حدث `change`.

* tracker.completeWork(**completed**)

  * **completed** رقم لإضافته إلى العمل المنجز

زيادة كمية العمل المنجز، وبالتالي زيادة نسبة الإنجاز.
لن تزيد أبدًا من العمل المنجز بعد مقدار العمل الذي يتعين القيام به. أي أن، النسب المئوية > 100٪ غير مسموح بها. يؤدي إلى تشغيل حدث `change`.

* tracker.finish()

يضع علامة على هذا المتعقب على أنه منتهي، وسيكون tracker.complete() الآن 1. يؤدي إلى تشغيل حدث `change`.

<a name="trackerstream"></a>TrackerStream
=============

* var tracker = new TrackerStream(**name**, **size**, **options**)

  * **الاسم** *(اختياري)* اسم هذا العداد للإبلاغ عنه في أحداث التغيير.  الإعدادات الافتراضية إلى غير محددة.
  * **الحجم** *(اختياري)* عدد وحدات البايت التي يتم إرسالها عبر هذا الدفق.
  * **الخيارات** *(اختياري)* تجزئة خيارات البث

كائن دفق التعقب هو دفق يمر عبر يقوم بتحديث كائن تعقب داخلي في كل مرة تمر فيها كتلة.  الغرض منه هو تتبع التنزيلات واستخراج الملفات والأنشطة الأخرى ذات الصلة. يمكنك استخدامه عن طريق توصيل مصدر البيانات الخاص بك إليه ثم استخدامه كمصدر بيانات الخاص بك.

إذا كانت بياناتك تحتوي على سمة طول، استخدامها كمقدار العمل المنجز عند تمرير القطعة.  إذا لم يكن كذلك (على سبيل المثال، تدفقات الكائنات)، احتساب كل قطعة على أنها تكمل وحدة عمل 1، لذلك يجب أن يكون حجمك هو إجمالي عدد الكائنات التي يتم بثها.

* tracker.addWork(**todo**)

  * **todo** زيادة الحجم الإجمالي المتوقع بواسطة **وحدات** البايت todo.

يزيد من حجم العمل الذي يتعين القيام به، وبالتالي يقلل من نسبة الإنجاز.  يؤدي إلى تشغيل حدث `change`.

---
ms.openlocfilehash: 496981207a34eb019688e8f2583ccc1abcbb5bce
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138049924"
---
<a name="semver1----the-semantic-versioner-for-npm"></a>semver(1) -- النسخة الدلالية لـnpm
===========================================

## <a name="install"></a>تثبيت

```bash
npm install --save semver
````

## <a name="usage"></a>الاستخدام

كوحدة عقدة:

```js
const semver = require('semver')

semver.valid('1.2.3') // '1.2.3'
semver.valid('a.b.c') // null
semver.clean('  =v1.2.3   ') // '1.2.3'
semver.satisfies('1.2.3', '1.x || >=2.5.0 || 5.0.0 - 7.2.3') // true
semver.gt('1.2.3', '9.8.7') // false
semver.lt('1.2.3', '9.8.7') // true
semver.minVersion('>=1.0.0') // '1.0.0'
semver.valid(semver.coerce('v2')) // '2.0.0'
semver.valid(semver.coerce('42.6.7.9.3-alpha')) // '42.6.7'
```

كأداة مساعدة لسطر الأوامر:

```
$ semver -h

A JavaScript implementation of the https://semver.org/ specification
Copyright Isaac Z. Schlueter

Usage: semver [options] <version> [<version> [...]]
Prints valid versions sorted by SemVer precedence

Options:
-r --range <range>
        Print versions that match the specified range.

-i --increment [<level>]
        Increment a version by the specified level.  Level can
        be one of: major, minor, patch, premajor, preminor,
        prepatch, or prerelease.  Default level is 'patch'.
        Only one version may be specified.

--preid <identifier>
        Identifier to be used to prefix premajor, preminor,
        prepatch or prerelease version increments.

-l --loose
        Interpret versions and ranges loosely

-p --include-prerelease
        Always include prerelease versions in range matching

-c --coerce
        Coerce a string into SemVer if possible
        (does not imply --loose)

Program exits successfully if any valid version satisfies
all supplied ranges, and prints all satisfying versions.

If no satisfying versions are found, then exits failure.

Versions are printed in ascending order, so supplying
multiple versions to the utility will just sort them.
```

## <a name="versions"></a>الإصدارات

يتم وصف "الإصدار" من خلال المواصفات `v2.0.0` الموجودة في <https://semver.org/>.

يتم تجريد الحرف الرائد `"="` أو `"v"` وتجاهله.

## <a name="ranges"></a>نطاقات

`version range` هي مجموعة `comparators` تحدد الإصدارات التي تلبي النطاق.

`comparator` يتكون من `operator` و`version`.  مجموعة `operators` البدائية هي:

* `<` أصغر من
* `<=` أصغر من أو يساوي
* `>` أكثر من
* `>=` أكبر من أو يساوي
* `=` يساوي.  إذا لم يتم تحديد أي عامل تشغيل، يتم افتراض المساواة، لذلك يكون هذا المشغل اختياريًا، ولكن قد يتم تضمينه.

على سبيل المثال، سيتطابق المقارنة `>=1.2.7` مع الإصدارات `1.2.7` و`1.2.8` و`2.5.3` و`1.3.9` ولكن ليس الإصدارات `1.2.6` أو `1.1.0`.

يمكن ربط المقارنات بواسطة مسافة بيضاء لتشكيل `comparator set`، والتي ترضى **بتقاطع** جميع المقارنات التي تتضمنها.

يتكون النطاق من مجموعة واحدة أو أكثر من مجموعات المقارنة، ينضم إليها `||`.  يطابق الإصدار نطاقًا إذا وفقط إذا كان كل مقارن في واحدة على الأقل من `||` مجموعات المقارنة المنفصلة راضيا عن الإصدار.

على سبيل المثال، سيتطابق النطاق `>=1.2.7 <1.3.0` مع الإصدارات `1.2.7` و`1.2.8` و`1.2.99` و`1.2.6` ولكن ليس الإصدارات `1.3.0` أو `1.1.0`.

على سبيل المثال، سيتطابق النطاق `1.2.7 || >=1.2.9 <2.0.0` مع الإصدارات `1.2.7` و`1.2.9` و`1.4.6` ولكن ليس الإصدارات `1.2.8` أو `2.0.0`.

### <a name="prerelease-tags"></a>علامات الإصدار التجريبي

إذا كان الإصدار يحتوي على علامة إصدار تجريبي (على سبيل المثال، `1.2.3-alpha.3`) فلن يسمح له باستيفاء مجموعات المقارنة إلا إذا كان هناك مقارن واحد على الأقل بنفس المجموعة `[major, minor, patch]` يحتوي أيضًا على علامة إصدار تجريبي.

على سبيل المثال، سيسمح للنطاق `>1.2.3-alpha.3` بمطابقة الإصدار `1.2.3-alpha.7`، لكنه *لن* يكون راضيًا عن `3.4.5-alpha.9`، على الرغم من أن `3.4.5-alpha.9` أكبر من `1.2.3-alpha.3` تقنيًا وفقًا لقواعد فرز SemVer.  يقبل نطاق الإصدار علامات الإصدار التجريبي فقط على الإصدار `1.2.3`.  `3.4.5`سيلبي *الإصدار* النطاق، لأنه لا يحتوي على علامة إصدار تجريبي، و`3.4.5` أكبر من `1.2.3-alpha.7`.

الغرض من هذا السلوك ذو شقين.  أولاً، يتم تحديث الإصدارات التجريبية بشكل متكرر بسرعة كبيرة، وتحتوي على العديد من التغييرات المفاجئة التي (حسب تصميم المؤلف) غير صالحة بعد للاستهلاك العام.
لذلك، بشكل افتراضي، يتم استبعادها من دلالات مطابقة النطاق.

ثانياً، أشار المستخدم الذي اختار استخدام إصدار تجريبي بوضوح إلى نية استخدام *هذه المجموعة المحددة* من إصدارات ألفا / بيتا / آر سي.  من خلال تضمين علامة الإصدار التجريبي في النطاق، يشير المستخدم إلى أنه على دراية بالمخاطر.  ومع ذلك، لا يزال من غير المناسب افتراض أنهم اختاروا تحمل مخاطر مماثلة في المجموعة *التالية* من الإصدارات التجريبية.

لاحظ أنه يمكن منع هذا السلوك (التعامل مع كافة الإصدارات التجريبية كما لو كانت إصدارات عادية، لغرض مطابقة النطاق) عن طريق تعيين العلامة `includePrerelease` على كائن الخيارات لأي [دالات](https://github.com/npm/node-semver#functions) تقوم بمطابقة النطاق.

#### <a name="prerelease-identifiers"></a>معرفات الإصدار التجريبي

تأخذ الطريقة `.inc` وسيطة سلسلة إضافية `identifier` من شأنها إلحاق قيمة السلسلة كمعرف إصدار تجريبي:

```javascript
semver.inc('1.2.3', 'prerelease', 'beta')
// '1.2.4-beta.0'
```

مثال على سطر الأوامر:

```bash
$ semver 1.2.3 -i prerelease --preid beta
1.2.4-beta.0
```

والتي يمكن استخدامها بعد ذلك لزيادة أكثر:

```bash
$ semver 1.2.4-beta.0 -i prerelease
1.2.4-beta.1
```

### <a name="advanced-range-syntax"></a>بناء جملة النطاق المتقدم

مزيلات الخواص من بناء الجملة المتقدمة إلى المقارنات البدائية بطرق حتمية.

يمكن دمج النطاقات المتقدمة بنفس طريقة دمج المقارنات البدائية باستخدام المساحة البيضاء أو `||`.

#### <a name="hyphen-ranges-xyz---abc"></a>نطاقات الواصلة `X.Y.Z - A.B.C`

يحدد مجموعة شاملة.

* `1.2.3 - 2.3.4` := `>=1.2.3 <=2.3.4`

إذا تم توفير إصدار جزئي كإصدار أول في النطاق الشامل، استبدال القطع المفقودة بأصفار.

* `1.2 - 2.3.4` := `>=1.2.0 <=2.3.4`

إذا تم توفير إصدار جزئي كإصدار ثان في النطاق الشامل، قبول جميع الإصدارات التي تبدأ بالأجزاء المرفقة من tuple، ولكن لا شيء سيكون أكبر من أجزاء tuple المقدمة.

* `1.2.3 - 2.3` := `>=1.2.3 <2.4.0`
* `1.2.3 - 2` := `>=1.2.3 <3.0.0`

#### <a name="x-ranges-12x-1x-12-"></a>نطاقات X `1.2.x` `1.X` `1.2.*` `*`

أي من `X` أو `x`أو `*` يمكن استخدامها "للوقوف" لإحدى القيم الرقمية في المجموعة `[major, minor, patch]`.

* `*` := `>=0.0.0` (أي إصدار يرضي)
* `1.x` := `>=1.0.0 <2.0.0` (مطابقة الإصدار الرئيسي)
* `1.2.x` := `>=1.2.0 <1.3.0` (مطابقة الإصدارات الرئيسية والثانوية)

يتم التعامل مع نطاق الإصدار الجزئي على أنه نطاق X-Range، وبالتالي فإن الحرف الخاص هو في الواقع اختياري.

* `""` (سلسلة فارغة) := `*` := `>=0.0.0`
* `1` := `1.x.x` := `>=1.0.0 <2.0.0`
* `1.2` := `1.2.x` := `>=1.2.0 <1.3.0`

#### <a name="tilde-ranges-123-12-1"></a>نطاقات Tilde `~1.2.3``~1.2``~1`

يسمح بإجراء تغييرات على مستوى التصحيح إذا تم تحديد إصدار ثانوي على المقارنة.  يسمح بإجراء تغييرات طفيفة المستوى إن لم يكن كذلك.

* `~1.2.3` := `>=1.2.3 <1.(2+1).0` := `>=1.2.3 <1.3.0`
* `~1.2` := `>=1.2.0 <1.(2+1).0` := `>=1.2.0 <1.3.0` (مثل `1.2.x`)
* `~1` := `>=1.0.0 <(1+1).0.0` := `>=1.0.0 <2.0.0` (مثل `1.x`)
* `~0.2.3` := `>=0.2.3 <0.(2+1).0` := `>=0.2.3 <0.3.0`
* `~0.2` := `>=0.2.0 <0.(2+1).0` := `>=0.2.0 <0.3.0` (مثل `0.2.x`)
* `~0` := `>=0.0.0 <(0+1).0.0` := `>=0.0.0 <1.0.0` (مثل `0.x`)
* `~1.2.3-beta.2` := `>=1.2.3-beta.2 <1.3.0` لاحظ أنه سيتم السماح بالإصدارات التجريبية في الإصدار `1.2.3`، إذا كانت أكبر من أو تساوي `beta.2`.  لذلك، `1.2.3-beta.4` سيسمح به، ولكن `1.2.4-beta.2` لن يسمح به، لأنه إصدار مسبق لمجموعة `[major, minor, patch]` مختلفة.

#### <a name="caret-ranges-123-025-004"></a>نطاقات الإقحام `^1.2.3``^0.2.5``^0.0.4`

يسمح بالتغييرات التي لا تعدل الرقم غير الصفري الموجود في أقصى اليسار في المجموعة `[major, minor, patch]`.  بمعنى آخر، يسمح هذا بالتصحيح والتحديثات الطفيفة للإصدارات `1.0.0` وما فوقها، وتحديثات التصحيح للإصدارات`0.X >=0.1.0`، *ولا* توجد تحديثات للإصدارات `0.0.X`.

يتعامل العديد من المؤلفين مع الإصدار `0.x` كما لو كانت `x` مؤشر "كسر التغيير" الرئيسي.

تعد نطاقات الإقحام مثالية عندما يقوم المؤلف بإجراء تغييرات فاصلة بين الإصدارات `0.2.4` و`0.3.0`، وهي ممارسة شائعة.
ومع ذلك، فإنه يفترض أنه *لن* يكون هناك تغييرات فاصلة بين `0.2.4` و `0.2.5`.  يسمح بالتغييرات التي يفترض أنها مضافة (ولكن غير مكسورة)، وفقًا للممارسات الشائعة الملاحظة.

* `^1.2.3` := `>=1.2.3 <2.0.0`
* `^0.2.3` := `>=0.2.3 <0.3.0`
* `^0.0.3` := `>=0.0.3 <0.0.4`
* `^1.2.3-beta.2` := `>=1.2.3-beta.2 <2.0.0` لاحظ أنه سيتم السماح بالإصدارات التجريبية في الإصدار `1.2.3`، إذا كانت أكبر من أو تساوي `beta.2`.  لذلك، `1.2.3-beta.4` سيسمح به، ولكن `1.2.4-beta.2` لن يسمح به، لأنه إصدار مسبق لمجموعة `[major, minor, patch]` مختلفة.
* `^0.0.3-beta` := `>=0.0.3-beta <0.0.4` لاحظ أنه سيتم السماح بالإصدارات التجريبية في الإصدار `0.0.3` *فقط*، إذا كانت أكبر من أو تساوي `beta`.  لذلك، سيكون `0.0.3-pr.2` مسموحًا به.

عند تحليل نطاقات الإقحام، فإن القيمة `patch` المفقودة تنزع المزايا إلى الرقم `0`، ولكنها ستسمح بالمرونة داخل تلك القيمة، حتى لو كانت الإصدارات الرئيسية والثانوية على حد سواء `0`.

* `^1.2.x` := `>=1.2.0 <2.0.0`
* `^0.0.x` := `>=0.0.0 <0.1.0`
* `^0.0` := `>=0.0.0 <0.1.0`

سيؤدي القيم المفقودة `minor` و`patch` إلى خفض المزايا إلى الصفر، ولكنه يسمح أيضاً بالمرونة داخل هذه القيم، حتى لو كانت النسخة الرئيسية صفراً.

* `^1.x` := `>=1.0.0 <2.0.0`
* `^0.x` := `>=0.0.0 <1.0.0`

### <a name="range-grammar"></a>قواعد النطاق

بتجميع كل هذا معاً، إليك قواعد Backus-Naur للنطاقات، لصالح مؤلفي المحلل اللغوي:

```bnf
range-set  ::= range ( logical-or range ) *
logical-or ::= ( ' ' ) * '||' ( ' ' ) *
range      ::= hyphen | simple ( ' ' simple ) * | ''
hyphen     ::= partial ' - ' partial
simple     ::= primitive | partial | tilde | caret
primitive  ::= ( '<' | '>' | '>=' | '<=' | '=' ) partial
partial    ::= xr ( '.' xr ( '.' xr qualifier ? )? )?
xr         ::= 'x' | 'X' | '*' | nr
nr         ::= '0' | ['1'-'9'] ( ['0'-'9'] ) *
tilde      ::= '~' partial
caret      ::= '^' partial
qualifier  ::= ( '-' pre )? ( '+' build )?
pre        ::= parts
build      ::= parts
parts      ::= part ( '.' part ) *
part       ::= nr | [-0-9A-Za-z]+
```

## <a name="functions"></a>الوظائف

تأخذ جميع الطرق والفئات وسيطة كائن نهائي `options`.  تكون كافة الخيارات في هذا الكائن `false` افتراضياً.  الخيارات المدعومة هي:

- `loose`  كن أكثر تسامحاً بشأن سلاسل semver غير الصالحة تماماً.
  (أي إخراج ناتج سيكون دائمًا متوافق مع التقييد 100% بالطبع.)  لأسباب توافق الإصدارات السابقة، إن كانت الوسيطة `options` قيمة منطقية بدلًا من عنصر، يتم ترجمتها لتكون المعلمة `loose`.
- `includePrerelease`  قم بالتعيين لمنع [السلوك الافتراضي](https://github.com/npm/node-semver#prerelease-tags) لاستبعاد الإصدارات ذات العلامات التجريبية من النطاقات ما لم يتم الاشتراك فيها صراحة.

ستكون المقارنات والنطاقات ذات الوضع الصارم صارمة بشأن سلاسل SemVer التي تقوم بتحليلها.

* `valid(v)`: إرجاع النسخة التي تم تحليلها، أو null إذا كانت غير صالحة.
* `inc(v, release)`: إرجاع الإصدار الذي تمت زيادته حسب نوع الإصدار (`major` أو `premajor` أو `minor` أو `preminor` أو `patch` أو `prepatch` أو `prerelease`) أو null إذا كان غير صالح
  * `premajor` في استدعاء واحد سوف يصطدم الإصدار حتى الإصدار الرئيسي التالي وصولا إلى الإصدار التجريبي من هذا الإصدار الرئيسي.
    `preminor` و`prepatch` يعملان بنفس الطريقة.
  * إذا تم استدعاؤه من إصدار غير تجريبي، فسيعمل `prerelease` نفس عمل `prepatch`. يزيد من إصدار التصحيح، ثم يقوم بعمل إصدار تجريبي. إذا كان إصدار الإدخال هو بالفعل إصدار تجريبي، فإنه ببساطة يزيده.
* `prerelease(v)`: إرجاع صفيف من مكونات الإصدار التجريبي، أو فارغ في حالة عدم وجوده. مثال: `prerelease('1.2.3-alpha.1') -> ['alpha', 1]`
* `major(v)`: إرجاع رقم الإصدار الرئيسي.
* `minor(v)`: إرجاع رقم الإصدار الثانوي.
* `patch(v)`: إرجاع رقم إصدار التصحيح.
* `intersects(r1, r2, loose)`: إرجاع true إذا تقاطع النطاقان أو المقارنتان المقدمتان.
* `parse(v)`: محاولة تحليل سلسلة كإصدار دلالي، بإرجاع كائن `SemVer` أو `null`.

### <a name="comparison"></a>المقارنة

* `gt(v1, v2)`: `v1 > v2`
* `gte(v1, v2)`: `v1 >= v2`
* `lt(v1, v2)`: `v1 < v2`
* `lte(v1, v2)`: `v1 <= v2`
* `eq(v1, v2)`: `v1 == v2` هذا صحيح إذا كانت متكافئة منطقيًا، حتى لو لم تكن نفس السلسلة بالضبط.  أنت تعرف بالفعل كيفية مقارنة السلاسل.
* `neq(v1, v2)`: `v1 != v2` عكس `eq`.
* `cmp(v1, comparator, v2)`: مرر في سلسلة مقارنة، وستستدعي الدالة المقابلة أعلاه.  تقوم `"==="` و`"!=="` بمقارنة سلسلة بسيطة، ولكن يتم تضمينها للاكتمال.  يطرح إذا تم توفير سلسلة مقارنة غير صالحة.
* `compare(v1, v2)`: إرجاع `0` إذا `v1 == v2`، أو `1` إذا كان `v1` أكبر، أو `-1` إذا كان `v2` أكبر.  يفرز بترتيب تصاعدي إذا تم تمريره إلى `Array.sort()`.
* `rcompare(v1, v2)`: عكس المقارنة.  فرز صفيف من الإصدارات بترتيب تنازلي عند تمريره إلى `Array.sort()`.
* `diff(v1, v2)`: إرجاع الفرق بين إصدارين حسب نوع الإصدار (`major`أو `premajor` أو `minor` أو `preminor` أو `patch` أو `prepatch` أو `prerelease`) أو null إذا كانت الإصدارات هي نفسها.

### <a name="comparators"></a>المقارنات

* `intersects(comparator)`: إرجاع true إذا تقاطعت المقارنات

### <a name="ranges"></a>نطاقات

* `validRange(range)`: إرجاع النطاق الصحيح أو الفارغ إذا كان غير صالح
* `satisfies(version, range)`: ارجع true إذا كان الإصدار يفي بالنطاق.
* `maxSatisfying(versions, range)`: إرجاع أعلى إصدار في القائمة يفي بالنطاق، أو `null` إذا لم يستوف أي منها.
* `minSatisfying(versions, range)`: إرجاع أعلى إصدار في القائمة يفي بالنطاق، أو `null` إذا لم يستوف أي منها.
* `minVersion(range)`: إرجاع أدنى إصدار يمكن أن يتطابق مع النطاق المحدد.
* `gtr(version, range)`: إرجاع `true` إذا كان الإصدار أكبر من جميع الإصدارات الممكنة في النطاق.
* `ltr(version, range)`: إرجاع `true` إذا كان الإصدار أكبر من جميع الإصدارات الممكنة في النطاق.
* `outside(version, range, hilo)`: إرجاع true إذا كان الإصدار خارج حدود النطاق في الاتجاه العالي أو المنخفض.  يجب أن تكون الوسيطة `hilo` إما السلسلة `'>'` أو `'<'`.  (هذه هي الدالة التي تسمى بواسطة `gtr` و`ltr`.)
* `intersects(range)`: إرجاع true إذا تقاطعت أي من مقارنات النطاقات

لاحظ أنه نظرًا لأن النطاقات قد تكون غير متجاورة، فقد لا يكون الإصدار أكبر من نطاق، أو أقل من نطاق، *أو* يلبي نطاقاً!  على سبيل المثال، سيكون للنطاق `1.2 <1.2.9 || >2.0.0` ثقب من `1.2.9` حتى `2.0.0`، لذلك لن يكون الإصدار `1.2.10` أكبر من النطاق (لأنه `2.0.1` يرضي، وهو أعلى)، ولا أقل من النطاق (لأن `1.2.8` يرضي، وهو أقل)، كما أنه لا يفي بالنطاق.

إذا كنت تريد معرفة ما إذا كان الإصدار يلبي نطاقاً أم لا، فاستخدم الدالة `satisfies(version, range)`.

### <a name="coercion"></a>قسر

* `coerce(version)`: يجبر سلسلة على semver إن أمكن

يهدف هذا إلى توفير ترجمة متسامحة للغاية لسلسلة غير semver إلى semver. يبحث عن الرقم الأول في السلسلة، ويستهلك جميع الأحرف المتبقية التي تلبي على الأقل semver جزئي (على سبيل المثال `1`، `1.2`، `1.2.3`) حتى الحد الأقصى للطول المسموح به (256 حرفاً).  يتم اقتطاع الإصدارات الأطول ببساطة (`4.6.3.9.2-alpha2` يصبح `4.6.3`).  يتم تجاهل جميع النصوص المحيطة ببساطة (`v3.4 replaces v3.3.1` يصبح `3.4.0`).  فقط النص الذي يفتقر إلى الأرقام سيفشل في الإكراه (`version one` غير صالح).  الحد الأقصى لطول أي مكون من مكونات semver يعتبر للإكراه هو 16 حرفاً. سيتم تجاهل المكونات الأطول (`10000000000000000.4.7.4` يصبح `4.7.4`).  القيمة القصوى لأي مكون semver هي `Number.MAX_SAFE_INTEGER || (2**53 - 1)`؛ المكونات ذات القيمة الأعلى غير صالحة (`9999999999999999.4.7.4` من المحتمل أن يكون غير صالح).

---
ms.openlocfilehash: 81fd1455668c9343defe69cbbbff10d48b1f97ef
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050162"
---
<a name="gauge"></a>gauge
=====

مقياس أفقي / شريط تقدم قائم على المحطة الطرفية عديم الجنسية تقريبًا.

```javascript
var Gauge = require("gauge")

var gauge = new Gauge()

gauge.show("test", 0.20)

gauge.pulse("this")

gauge.hide()
```

![](gauge-demo.gif)


### <a name="changes-from-1x"></a>التغييرات من 1.x

Gauge 2.x يكسر الإصدار، يرجى الاطلاع على [سجل التغيير] للحصول على تفاصيل حول ما تم تغييره إذا كنت سابقًا مستخدمًا لهذه الوحدة.

[changelog]: CHANGELOG.md

### <a name="the-gauge-class"></a>فئة المقياس

هذه هي الواجهة النموذجية للوحدة النمطية - فهي توفر واجهة جميلة للنار والنسيان لعرض معلومات الحالة الخاصة بك.

```
var Gauge = require("gauge")

var gauge = new Gauge([stream], [options])
```

* **دفق** – *(اختياري، STDERR افتراضي)* دفق يجب كتابة تحديثات شريط التقدم إليه.  يكرم Gauge الضغط الخلفي وسيتوقف مؤقتا عن معظم الكتابة إذا تمت الإشارة إليه.
* **الخيارات** – *(اختياري)* كائن خيار.

يبني مقياسًا جديدًا. يتم رسم المقاييس على خط واحد، ولا يتم رسمها إذا لم يكن **الدفق** tty ولم يتم توفير tty صراحة.

إذا كان **البث** عبارة عن محطة طرفية أو إذا مررت في **tty** إلى **الخيارات**، فسوف نكتشف تغيير حجم المحطة الطرفية وإعادة رسمها لتناسبها.  نقوم بذلك من خلال مشاهدة الأحداث `resize` على tty.  (لتفادي الخطأ في إصدارات Node قبل 2.5.0، نحذر منهم على stdout إذا كان tty stderr.) تغيير الحجم إلى حجم نوافذ أكبر سيكن سهلًا، لكن تقليص حجم النافذة سيجعل النتيجة دائمًا مهملة.

**IMPORTANT:** إذا كنت تمر سابقا في دفق غير tty ولكنك لا تزال تريد الإخراج (على سبيل المثال، دفق ملفوف بالوحدة النمطية`ansi`)، فأنت بحاجة إلى المرور في خيار tty أدناه، كما **تحتاج إلى الوصول إلى** tty`gauge` الأساسي من أجل القيام بأشياء مثل تغيير حجم المحطة الطرفية واكتشاف عرض المحطة الطرفية.

يمكن أن يحتوي كائن **الخيارات** على الخصائص التالية، وكلها اختيارية:

* **updateInterval**: عدد التحديثات التي ينبغي أن تحدث للمقياس، بالمللي ثانية.
* **fixedFramerate**: الافتراضي هو خطأ على node 0.8، وصواب على أي شيء آخر.  عندما يكون هذا صحيحًا، يتم إنشاء مؤقت لتشغيل مرة واحدة كل `updateInterval` مللي ثانية، عندما تكون خاطئة، تتم طباعة التحديثات بمجرد ظهورها ولكن التحديثات في كثير من الأحيان أكثر مما مرات تجاهل `updateInterval`.  السبب في أن 0.8 لا يحتوي على هذه المجموعة إلى true هو أنه لا يمكنه `unref` المؤقت الخاص به، وبالتالي فإنه سيوقف برنامجك من الخروج - إذا كنت ترغب في استخدام هذه الميزة مع 0.8 فقط تأكد من استدعاء `gauge.disable()` قبل أن تتوقع خروج برنامجك.
* **النُسق:** مجموعة نسق لاستخدامها عند اختيار نسق لاستخدامه. الإعدادات الافتراضية `gauge/themes`، راجع وثائق [themes] للحصول على التفاصيل.
* **theme**: اختر نسقًا للاستخدام، يمكن أن يكون:
  * كائن النسق، وفي هذه الحالة لا يتم استخدام **themes**.
  * اسم النسق، والذي سيتم البحث عنه في عنصر *themes* الحالية.
  * كائن تكوين يحتوي على أي من المفاتيح `hasUnicode` أو `hasColor` أو `platform` والتي إذا تم استخدامها لتجاوز تخميناتنا عند إجراء تحديد سمة افتراضي.

  إذا لم يتم تحديد أي سمة، سيتم اختيار افتراضي باستخدام مزيج من أفضل تخميناتنا في نظام التشغيل الخاص بك ودعم الألوان ودعم unicode.
* **template**: يصف ما تريد أن يبدو عليه المقياس.  الافتراضي هو ما يستخدمه npm.  [الوثائق] التفصيلية هي أدناه في هذه الوثيقة.
* **hideCursor**: الإعدادات الافتراضية إلى صواب.  إذا كان ذلك صحيحا، إخفاء المؤشر في أثناء عرض المقياس.
* **tty**: tty التي تكتب إليها في النهاية.  الإعدادات الافتراضية إلى نفس **stream**.  يستخدم هذا للكشف عن عرض المحطة الطرفية وتغيير حجمها. العرض المستخدم هو `tty.columns - 1`. إذا لم يكن هناك tty متاح، افتراض عرض `79`.
* **enabled**: الافتراضي هو صواب إن كان `tty` TTY، وغير ذلك خطأ.  إذا كان ذلك صحيحًا، يبدأ تمكين المقياس.  إذا تم تعطيله، يتم تجاهل جميع أوامر التحديث ولن تتم طباعة أي مقياس حتى تستدعي `.enable()`.
* **Plumbing**: الفئة التي تستخدمها لتوليد المقياس للطباعة.  الافتراضي `require('gauge/plumbing')` وعادة لن تحتاج إلى تجاوز هذا.
* **cleanupOnExit**: الإعدادات الافتراضية إلى صواب. عادة ما نقوم بتسجيل معالج خروج للتأكد من إعادة تشغيل المؤشر ومسح شريط التقدم عند خروج العملية، حتى إذا قمت بإخراج Ctrl-C أو الخروج بطريقة غير متوقعة. يمكنك تعطيل هذا ولن يتم تسجيل معالج الخروج.

[has-unicode]: https://www.npmjs.com/package/has-unicode
[themes]: #themes
[documentation]: #templates

#### `gauge.show(section | status, [completed])`

الوسيطة الأولى هي إما القسم أو اسم الشيء الحالي الذي يساهم في التقدم أو كائن يحتوي على مفاتيح مثل القسم أو **القسم** **القسم الفرعي & ** **المكتمل** (أو أي أنواع أخرى لديك أنواع لها في قالب مخصص).  إذا كنت لا ترغب في تحديث أو تعيين أي من هذه يمكنك تمرير `null` وسيتم تجاهلها.

الوسيطة الثانية هي النسبة المئوية المكتملة كقيمة بين 0 و 1.
بدونها، لا يتم تحديث الاكتمال. ستلاحظ أيضًا أنه يمكن تمرير الإكمال كجزء من كائن الحالة كوسيطة أولى. إذا تم تمرير كل من الوسيطة المكتملة والوسيطة المكتملة، فستفوز الوسيطة المكتملة.

#### `gauge.hide([cb])`

يزيل المقياس من المحطة.  اختياريًا، معاودة استدعاء `cb` بعد أن أتيحت لـ IO فرصة للحدوث (حالياً هذا يعني فقط بعد معاودة استدعاء `setImmediate`.)

اتضح أن هذا مهم عند إيقاف شريط التقدم مؤقتًا على مقبض ملف واحد والطباعة إلى آخر - وإلا (مع طباعة كبيرة بما فيه الكفاية) يمكن أن ينتهي الأمر بطباعة بتات "شريط التقدم النهائي" إلى مقبض ملف شريط التقدم بينما تتم طباعة الأشياء الأخرى إلى مقبض ملف آخر. هذه الحصول على متشابكة يمكن أن يسبب الفساد في بعض المحطات.

#### `gauge.pulse([subsection])`

* **القسم الفرعي** - *(اختياري)* الشيء المحدد الذي أثار هذا النبض

يدور الدوار في المقياس لإظهار الإخراج.  إذا تم تضمين **القسم الفرعي**، فسيتم دمجه مع الاسم الأخير الذي تم تمريره إلى `gauge.show`.

#### `gauge.disable()`

يخفي المقياس ويتجاهل المزيد من المكالمات إلى `show` أو `pulse`.

#### `gauge.enable()`

يعرض المقياس ويستأنف التحديث عند استدعاء `show` أو `pulse`.

#### `gauge.isEnabled()`

ترجع هذه الدالة true إذا تم تمكين المقياس.

#### `gauge.setThemeset(themes)`

قم بتغيير مجموعة السمات لتحديد سمة منها. نفس الخيار `themes` المستخدم في المنشئ. سيتم إعادة تحديد السمة من مجموعة السمات هذه.

#### `gauge.setTheme(theme)`

تغيير السمة النشطة، سيتم عرضها مع العرض أو النبض التالي. ويمكن أن يتمثل ذلك فيما يلي:

* كائن النسق، وفي هذه الحالة لا يتم استخدام **themes**.
* اسم النسق، والذي سيتم البحث عنه في عنصر *themes* الحالية.
* كائن تكوين يحتوي على أي من المفاتيح `hasUnicode` أو `hasColor` أو `platform` والتي إذا تم استخدامها لتجاوز تخميناتنا عند إجراء تحديد سمة افتراضي.

إذا لم يتم تحديد أي سمة، سيتم اختيار افتراضي باستخدام مزيج من أفضل تخميناتنا في نظام التشغيل الخاص بك ودعم الألوان ودعم unicode.

#### `gauge.setTemplate(template)`

تغيير القالب النشط، سيتم عرضه مع العرض أو النبض التالي

### <a name="tracking-completion"></a>تتبع الانتهاء

إذا كان لديك أكثر من شيء واحد يحدث وتريد تتبع الانتهاء منه، فقد تجد أن [are-we-there-yet] المتعلقة مفيدة.  يمكن توصيل الحدث `change` بالطريقة `show` للحصول على واجهة شريط تقدم أكثر تقليدية.

[are-we-there-yet]: https://www.npmjs.com/package/are-we-there-yet

### <a name="themes"></a>السمات

```
var themes = require('gauge/themes')

// fetch the default color unicode theme for this platform
var ourTheme = themes({hasUnicode: true, hasColor: true})

// fetch the default non-color unicode theme for osx
var ourTheme = themes({hasUnicode: true, hasColor: false, platform: 'darwin'})

// create a new theme based on the color ascii theme for this platform
// that brackets the progress bar with arrows
var ourTheme = themes.newTheme(theme(hasUnicode: false, hasColor: true}), {
  preProgressbar: '→',
  postProgressbar: '←'
})
```

الكائن الذي تم إرجاعه بواسطة `gauge/themes` هو مثيل للفئة `ThemeSet`.

```
var ThemeSet = require('gauge/theme-set')
var themes = new ThemeSet()
// or
var themes = require('gauge/themes')
var mythemes = themes.newThemeset() // creates a new themeset based on the default themes
```

#### <a name="themesopts"></a>themes(opts)
#### <a name="themesgetdefaultopts"></a>themes.getDefault(opts)

كائنات النسق هي وظيفة تجلب النسق الافتراضي استناداً إلى النظام الأساسي وunicode ودعم الألوان.

الخيارات هي كائن له الخصائص التالية:

* **hasUnicode** - إذا كان صحيحًا، فقم بإحضار سمة unicode، إذا لم يكن هناك سمة unicode متاحة، استخدام سمة غير unicode.
* **hasColor** - إذا كان صحيحًا، فقم بإحضار سمة لون، وإذا لم يكن هناك نسق لون متاح، استخدام سمة غير ملونة.
* **platform** (اختياري) - الإعدادات الافتراضية لـ`process.platform`.  إذا لم تكن هناك مطابقة للنظام الأساسي متاحة، استخدام `fallback` بدلاً من ذلك.

إذا لم يتم العثور على سمة متوافقة، طرح خطأ مع `code` لـ`EMISSINGTHEME`.

#### <a name="themesaddthemethemename-themeobj"></a>themes.addTheme(themeName, themeObj)
#### <a name="themesaddthemethemename-parenttheme-newtheme"></a>themes.addTheme(themeName, [parentTheme], newTheme)

إضافة نسق مسمى إلى مجموعة السمات.  يمكنك تمرير إما كائن سمة، كما تم إرجاعه بواسطة `themes.newTheme` أو الوسيطات التي ستمررها إلى `themes.newTheme`.

#### <a name="themesgetthemenames"></a>themes.getThemeNames()

إرجاع قائمة بجميع أسماء السمات في مجموعة السمات هذه. مناسبة للاستخدام في `themes.getTheme(…)`.

#### <a name="themesgetthemename"></a>themes.getTheme(name)

إرجاع كائن النسق من مجموعة النسق هذه المسماة `name`.

إذا لم يكن `name` موجوداً في هذا السمة، طرح خطأ باستخدام `code` لـ`EMISSINGTHEME`.

#### <a name="themessetdefaultopts-themename"></a>themes.setDefault([opts], themeName)

`opts` هو كائن له الخصائص التالية.

* **platform** - الإعدادات الافتراضية لـ`'fallback'`.  إذا كان المظهر الخاص بك محددا للنظام الأساسي، فحدد ذلك هنا باستخدام النظام الأساسي من `process.platform`، على سبيل المثال `win32`، `darwin` إلخ.
* **hasUnicode** - افتراضي لـ`false`. إذا كان المظهر الخاص بك يستخدم unicode، فيجب عليك تعيين هذا إلى true.
* **hasColor** - الإعدادات الافتراضية لـ`false`.  إذا كان المظهر الخاص بك يستخدم color، فيجب عليك تعيين هذا إلى true.

`themeName` هو اسم السمة (كما هو موضح لـ`addTheme`) لاستخدامها في هذه المجموعة من `opts`.

#### <a name="themesnewthemeparenttheme-newtheme"></a>themes.newTheme([parentTheme,] newTheme)

إنشاء كائن نسق جديد استنادًا إلى `parentTheme`.  إذا لم يتم توفير أي `parentTheme`، يتم تعريف الحد الأدنى من parentTheme الذي يحدد وظائف لتقديم مؤشر النشاط (المغزل) وشريط التقدم. (يتم تعريف هذا الأصل الاحتياطي في `gauge/base-theme`.)

يجب أن يكون newTheme كائنًا عاريًا - سنبدأ بمناقشة الخصائص المحددة بواسطة السمات الافتراضية:

* **preProgressbar** - يتم عرضه قبل شريط التقدم، إذا تم عرض شريط التقدم.
* **preProgressbar** - يتم عرضه بعد شريط التقدم، إذا تم عرض شريط التقدم.
* **progressBarTheme** - تم تمرير السمة الفرعية إلى عارض شريط التقدم، إنها كائن يحتوي على خصائص `complete` و`remaining` وهي السلاسل التي تريد تكرارها لتلك الأقسام من شريط التقدم.
* **activityIndicatorTheme** - موضوع مؤشر النشاط (المغزل)، يمكن أن يكون هذا إما سلسلة، يكون فيها كل حرف خطوة مختلفة، أو مجموعة من السلاسل.
* **preSubsection** - يتم عرضه كفاصل بين `section` و`subsection` عندما تتم طباعة الأخير.

بشكل أعم، يمكن أن يكون للسمات أي قيمة تكون قيمة صالحة عند عرض القوالب. يتم استخدام الخصائص الموجودة في النسق عندما يتطابق اسمها مع نوع في القالب. يمكن أن تكون قيمهم:

* **سلاسل & الأرقام** - سيتم تضمينها كما هي
* **دالة (القيم، السمة، العرض)** - يجب أن ترجع ما تريده في الإخراج الخاص بك.
  *قيم* هي كائن يحتوي على قيم يتم توفيرها عبر `gauge.show`، *السمة* هي السمة الخاصة بهذا العنصر (انظر أدناه) أو كائن السمة هذا، *والعرض* هو عدد الأحرف التي يجب أن تكون عليها النتيجة.

هناك عدد من البادئات الخاصة:

* **قبل** - يظهر قبل الخاصية، إذا كانت معروضة.
* **بعد** - يظهر بعد الخاصية، إذا تم عرضها.

ولاحقة خاصة واحدة:

* **Theme** - يتم تمرير قيمته إلى عنصر من نوع الدالة كنسق.

#### <a name="themesaddtoallthemestheme"></a>themes.addToAllThemes(theme)

*هذا يمتزج*  `theme` في جميع المواضيع المحددة حاليًا. كما أنه يضيفه إلى السمة الأصل الافتراضية لمجموعة السمات هذه، لذلك ستحصل السمات المستقبلية المضافة إلى مجموعة السمات هذه على القيم من `theme` بشكل افتراضي.

#### <a name="themesnewthemeset"></a>themes.newThemeset()

انسخ مجموعة السمات الحالية إلى سمة جديدة.  هذا يسمح لك بسهولة وراثة سمة واحدة من أخرى.

### <a name="templates"></a>القوالب

القالب عبارة عن مجموعة من الكائنات والسلاسل التي، بعد تقييمها، سيتم تحويلها إلى خط المقياس.  القالب الافتراضي هو:

```javascript
[
    {type: 'progressbar', length: 20},
    {type: 'activityIndicator', kerning: 1, length: 1},
    {type: 'section', kerning: 1, default: ''},
    {type: 'subsection', kerning: 1, default: ''}
]
```

يمكن أن تكون عناصر القالب المختلفة إما **سلاسل عادية**، وفي هذه الحالة سيتم تضمينها حرفيًا في الإخراج، أو كائنات ذات الخصائص التالية:

* يمكن أن يكون *النوع* أيًا مما يلي بالإضافة إلى أي مفاتيح تمرر إليها `gauge.show` بالإضافة إلى أي مفاتيح لديك على سمة مخصصة.
  * `section` - ما هو الشيء الكبير الذي تعمل عليه الآن.
  * `subsection` - ما هو عنصر هذا الشيء الذي يعمل حاليًا.
  * `activityIndicator` - يظهر الدوار باستخدام `activityIndicatorTheme` من السمة النشطة الخاصة بك.
  * `progressbar` - شريط تقدم يمثل `completed` الحالي لك باستخدام `progressbarTheme` من السمة النشطة الخاصة بك.
* *kerning* - عدد المسافات التي يجب أن تكون بين هذا العنصر والعناصر الأخرى، إذا تم عرض هذا العنصر على الإطلاق.
* *maxLength* – الحد الأقصى لطول هذا العنصر. إذا كانت قيمته أطول، يتم اقتطاعه.
* *minLength* – الحد الأدنى لطول هذا العنصر. إذا كانت قيمته أقصر، يتم تبطينه وفقًا لقيمة *المحاذاة*.
* *محاذاة* – (افتراضي: يسار) القيم المحتملة "يسار" و"يمين" و"وسط". يعمل كما تتوقع من معالجات النصوص.
* *length* - يوفر قيمة واحدة لكل من *minLength* و *maxLength*. إذا تم تحديد كل من *الطول* و *minLength أو *maxLength*، فإن الأخير له الأسبقية.
* *value* – قيمة حرفية لاستخدامها لعنصر القالب هذا.
* *default* – قيمة افتراضية لاستخدامها لعنصر القالب هذا إذا لم يتم تمرير قيمة بطريقة أخرى.

### <a name="plumbing"></a>PLUMBING

هذا بسيط للغاية، لا تفترض شيئًا، ولا تفعل أي شيء سحري داخلي يستخدمه المقياس لتنفيذ واجهته العادية.

```
var Plumbing = require('gauge/plumbing')
var gauge = new Plumbing(theme, template, width)
```

* **theme**: السمة لاستخدامها.
* **template**: القالب لاستخدامه.
* **width**: مدى عرض مقياسك

#### `gauge.setTheme(theme)`

تغيير السمة النشطة.

#### `gauge.setTemplate(template)`

تغيير القالب النشط.

#### `gauge.setWidth(width)`

تغيير العرض للعرض في.

#### `gauge.hide()`

إرجاع السلسلة اللازمة لإخفاء شريط التقدم

#### `gauge.hideCursor()`

إرجاع سلسلة لإخفاء المؤشر.

#### `gauge.showCursor()`

إرجاع سلسلة لإظهار المؤشر.

#### `gauge.show(status)`

باستخدام `status` القيم، قم بعرض القالب المقدم مع النسق وإرجاع سلسلة مناسبة للطباعة لتحديث المقياس.

---
ms.openlocfilehash: f8a035cf72e9aaa28084cf7e8e5cd0749b5653dc
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: ar-SA
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050140"
---
# <a name="node-jwa-build-statushttpstravis-ciorgbrianloveswordsnode-jwa"></a>node-jwa [![Build Status](https://travis-ci.org/brianloveswords/node-jwa.svg?branch=master)](https://travis-ci.org/brianloveswords/node-jwa)

تطبيق [خوارزميات ويب JSON](http://tools.ietf.org/id/draft-ietf-jose-json-web-algorithms-08.html) يركز (حصريًا، في هذه المرحلة) على الخوارزميات اللازمة [لتوقيعات ويب JSON](http://self-issued.info/docs/draft-ietf-jose-json-web-signature.html).

تدعم هذه المكتبة جميع خوارزميات التشفير المطلوبة والموصى بها والاختيارية لـ JWS:

قيمة المعلمة alg | التوقيع الرقمي أو خوارزمية MAC
----------------|----------------------------
HS256 | HMAC باستخدام خوارزمية التجزئة SHA-256
HS384 | HMAC باستخدام خوارزمية التجزئة SHA-384
HS512 | HMAC باستخدام خوارزمية التجزئة SHA-512
RS256 | RSASSA باستخدام خوارزمية التجزئة SHA-256
RS384 | RSASSA باستخدام خوارزمية التجزئة SHA-384
RS512 | RSASSA باستخدام خوارزمية التجزئة SHA-512
PS256 | RSASSA باستخدام خوارزمية التجزئة SHA-256
PS384 | RSASSA باستخدام خوارزمية التجزئة SHA-384
PS512 | RSASSA باستخدام خوارزمية التجزئة SHA-512
ES256 | ECDSA باستخدام منحنى P-256 وخوارزمية التجزئة SHA-256
ES384 | ECDSA باستخدام منحنى P-384 وخوارزمية التجزئة SHA-384
ES512 | ECDSA باستخدام منحنى P-521 وخوارزمية التجزئة SHA-512
بلا | لا يتضمن التوقيع الرقمي أو قيمة MAC

يرجى ملاحظة أن PS* يعمل فقط على العقدة 6.12+ (باستثناء 7.x).

# <a name="requirements"></a>المتطلبات

من أجل تشغيل الاختبارات، يلزم وجود إصدار حديث من OpenSSL. ** الإصدار الذي يأتي مع OS X (OpenSSL 0.9.8r 8 فبراير
2011) ليست حديثة بما فيه الكفاية **، لأنها لا تدعم بشكل كامل مفاتيح ECDSA. ستحتاج إلى استخدام إصدار > 1.0.0 ؛ لقد اختبرت مع OpenSSL 1.0.1c 10 مايو 2012.

# <a name="testing"></a>الاختبار

لتشغيل الاختبارات افعل

```bash
$ npm test
```

سيؤدي ذلك إلى إنشاء مجموعة من أزواج المفاتيح لاستخدامها في الاختبار. إذا كنت ترغب في إنشاء أزواج مفاتيح جديدة، فقم بـ`make clean` قبل تشغيل `npm test` مرة أخرى.

## <a name="methodology"></a>المنهجية

أنا أنتج `openssl dgst -sign` لاختبار علامة OpenSSL → JS التحقق واختبار `openssl dgst -verify` علامة JS → OpenSSL التحقق لكل من خوارزميات RSA وECDSA.

# <a name="usage"></a>الاستخدام

## <a name="jwaalgorithm"></a>jwa(algorithm)

ينشئ كائنًا جديدًا `jwa` باستخدام `sign` الخوارزمية وطرقها `verify`. يمكن العثور على القيم الصالحة للخوارزمية في الجدول أعلاه (`'HS256'`، `'HS384'`، إلخ) وهي حساسة لحالة الأحرف. سيؤدي تمرير قيمة خوارزمية غير صالحة إلى رمي `TypeError`.


## <a name="jwasigninput-secretorprivatekey"></a>jwa#sign(input, secretOrPrivateKey)

قم بتوقيع بعض المدخلات إما باستخدام سر لخوارزميات HMAC أو مفتاح خاص لخوارزميات RSA وECDSA.

إذا لم يكن الإدخال بالفعل سلسلة أو مخزن مؤقت، `JSON.stringify` سيتم استدعاؤه لمحاولة إجباره.

بالنسبة لخوارزمية HMAC، يجب أن تكون `secretOrPrivateKey` سلسلة أو مخزن مؤقت. بالنسبة إلى ECDSA وRSA، يجب أن تكون القيمة سلسلة تمثل مفتاحًا **خاصًا** مشفرًا من PEM.

تنسيق إخراج [base64url](http://en.wikipedia.org/wiki/Base64#URL_applications). هذا للراحة حيث تتوقع JWS التوقيع بهذا التنسيق. إذا كان تطبيقك يحتاج إلى الإخراج بتنسيق مختلف، [فيرجى فتح مشكلة](https://github.com/brianloveswords/node-jwa/issues). في غضون ذلك، يمكنك استخدام [brianloveswords/base64url](https://github.com/brianloveswords/base64url) لفك تشفير التوقيع.

اعتبارًا من nodejs *v0.11.8*، تم تقديم دعم SPKAC. إذا كان إصدار nodeJs الخاص بك مرضيًا، فيمكنك تمرير كائن `{ key: '..', passphrase: '...' }`


## <a name="jwaverifyinput-signature-secretorpublickey"></a>jwa#verify(input, signature, secretOrPublicKey)

تحقق من توقيع. إرجاع `true` أو `false`.

يجب أن تكون `signature` سلسلة مشفرة base64url.

بالنسبة لخوارزمية HMAC، يجب أن تكون `secretOrPublicKey` سلسلة أو مخزن مؤقت. بالنسبة إلى ECDSA وRSA، يجب أن تكون القيمة سلسلة تمثل مفتاحًا **عامًا** مشفرًا من PEM.


# <a name="example"></a>مثال

⁧⁩HMAC⁧⁩
```js
const jwa = require('jwa');

const hmac = jwa('HS256');
const input = 'super important stuff';
const secret = 'shhhhhh';

const signature = hmac.sign(input, secret);
hmac.verify(input, signature, secret) // === true
hmac.verify(input, signature, 'trickery!') // === false
```

مع مفاتيح
```js
const fs = require('fs');
const jwa = require('jwa');
const privateKey = fs.readFileSync(__dirname + '/ecdsa-p521-private.pem');
const publicKey = fs.readFileSync(__dirname + '/ecdsa-p521-public.pem');

const ecdsa = jwa('ES512');
const input = 'very important stuff';

const signature = ecdsa.sign(input, privateKey);
ecdsa.verify(input, signature, publicKey) // === true
```
## <a name="license"></a>الترخيص

معهد ماساتشوستس للتكنولوجيا

```
Copyright (c) 2013 Brian J. Brennan

Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
```
